/*! For license information please see trader.trader-app.efa11294e40652c978d0.js.LICENSE.txt */
"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["trader-app"],{"./src/App/Components/Elements/ContentLoader/index.ts":(e,t,r)=>{r.d(t,{Y:()=>i,g:()=>s});var n=r("../../node_modules/react-content-loader/dist/react-content-loader.es.js"),o=r("react"),a=r.n(o),i=function(e){var t=e.speed;return a().createElement(n.Ay,{height:173,width:218,speed:t,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},a().createElement("rect",{x:"43",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),a().createElement("rect",{x:"147",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),a().createElement("rect",{x:"12",y:"50",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"13",y:"68",rx:"0",ry:"0",width:"192",height:"8"}),a().createElement("rect",{x:"5",y:"89",rx:"0",ry:"0",width:"208",height:"1"}),a().createElement("rect",{x:"12",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"12",y:"9",rx:"0",ry:"0",width:"24",height:"24"}),a().createElement("rect",{x:"116",y:"11",rx:"0",ry:"0",width:"24",height:"24"}),a().createElement("rect",{x:"12",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),a().createElement("rect",{x:"116",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"116",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),a().createElement("rect",{x:"12",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"12",y:"153",rx:"0",ry:"0",width:"88",height:"8"}),a().createElement("rect",{x:"116",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"116",y:"153",rx:"0",ry:"0",width:"88",height:"8"}))},c=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),s=function(e){var t=e.speed;return(0,c.Y)().isMobile?a().createElement(n.Ay,{height:214,width:344,speed:t,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",viewBox:"0 0 344 176"},a().createElement("rect",{x:"148",y:"24",rx:"3",ry:"3",width:"40",height:"4"}),a().createElement("rect",{x:"8",y:"40",rx:"4",ry:"4",width:"328",height:"40"}),a().createElement("rect",{x:"8",y:"88",rx:"4",ry:"4",width:"328",height:"40"}),a().createElement("rect",{x:"8",y:"136",rx:"4",ry:"4",width:"160",height:"70"}),a().createElement("rect",{x:"176",y:"136",rx:"4",ry:"4",width:"160",height:"70"})):a().createElement(n.Ay,{height:548,width:240,speed:t,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},a().createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"240",height:"76"}),a().createElement("rect",{x:"0",y:"84",rx:"4",ry:"4",width:"240",height:"132"}),a().createElement("rect",{x:"0",y:"224",rx:"4",ry:"4",width:"240",height:"120"}),a().createElement("rect",{x:"0",y:"352",rx:"4",ry:"4",width:"240",height:"194"}))}},"./src/App/Components/Elements/chart-loader.tsx":(e,t,r)=>{r.d(t,{A:()=>s});var n=r("react"),o=r.n(n),a=r("../../node_modules/classnames/index.js"),i=r.n(a);const c=function(e){var t=e.className,r=e.data_testid,n=e.is_invisible,a=e.theme,c=e.id;return o().createElement("div",{id:c,"data-testid":r,className:i()("barspinner","barspinner--".concat(a||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return o().createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))},s=function(e){var t=e.is_dark;return e.is_visible?o().createElement("div",{className:"chart-container__loader"},o().createElement(c,{theme:t?"dark":"light",data_testid:"dt_barspinner"})):null}},"./src/App/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>Je});var n=r("react"),o=r.n(n),a=r("../../node_modules/react-loadable/lib/index.js"),i=r.n(a),c=r("react-router"),s=r("@deriv/components"),l=r("@deriv/shared"),u=r("react-router-dom"),d=function(e,t){var r;return null==t||t.some((function(t){var n;try{n=(0,c.matchPath)(e,t)}catch(e){if(/undefined/.test(e.message))return}return n?(r=t,!0):!!t.routes&&(r=d(e,t.routes))})),r},m=r("@deriv/translations"),f=r("../../node_modules/classnames/index.js"),p=r.n(f),_=r("mobx-react-lite"),h=r("../stores/src/useStore.ts"),y=r("./src/Stores/useTraderStores.tsx"),v=r("./src/App/Components/Elements/chart-loader.tsx"),g=r("../../node_modules/react-transition-group/esm/CSSTransition.js");const b=function(e){var t=e.error;return o().createElement("div",{className:"portfolio-empty"},o().createElement("div",{className:"portfolio-empty__wrapper"},t?o().createElement(s.Text,{color:"disabled",size:"xs"},t):o().createElement(o().Fragment,null,o().createElement(s.Icon,{icon:"IcPortfolio",className:"portfolio-empty__icon",size:96,color:"disabled"}),o().createElement(s.Text,{align:"center",className:"portfolio-empty__text",color:"disabled",size:"xs"},(0,m.localize)("You have no open positions.")))))};var E=["row","measure","onHoverPosition","symbol","is_new_row","onClickRemove"];function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(null,arguments)}var x=function(e){var t=e.row,r=e.measure,n=e.onHoverPosition,a=e.symbol,i=e.is_new_row,c=e.onClickRemove,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,E),d=(0,l.useNewRowTransition)(i).in_prop;return o().useEffect((function(){r&&setTimeout((function(){r()}),0)}),[null==t?void 0:t.contract_info.is_sold,r,null==t?void 0:t.id]),o().useEffect((function(){if(null!=t&&t.contract_info.is_sold){var e=setTimeout((function(){c(t.id)}),8e3);return function(){return clearTimeout(e)}}}),[null==t?void 0:t.contract_info.is_sold,null==t?void 0:t.id,c]),o().createElement(g.A,{in:d,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},onEntered:r,unmountOnExit:!0},o().createElement("div",{className:"dc-contract-card__wrapper"},o().createElement(s.PositionsDrawerCard,w({},t,u,{onMouseEnter:function(){n(!0,t,a)},onMouseLeave:function(){n(!1,t,a)},onFooterEntered:r,should_show_transition:i,onClickRemove:c}))))};const C=(0,_.observer)((function(e){var t=w({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),r=(0,y.P)(),n=r.symbol,a=r.contract_type,i=(0,h.A)(),c=i.client,l=i.common,u=i.contract_trade,d=i.portfolio,f=i.ui,_=c.currency,v=l.server_time,g=u.getContractById,E=d.all_positions,C=d.error,S=d.onHoverPosition,k=d.onMount,T=d.onClickCancel,O=d.onClickSell,A=d.removePositionById,N=f.is_mobile,L=f.is_positions_drawer_on,P=f.togglePositionsDrawer,j=f.addToast,M=f.current_focus,I=f.removeToast,z=f.setCurrentFocus,D=f.should_show_cancellation_warning,F=f.toggleCancellationWarning,R=o().useRef(null),W=o().useRef(null),G=o().useRef(null);o().useEffect((function(){k()}),[k]),o().useEffect((function(){var e;null==W||null===(e=W.current)||void 0===e||e.scrollTo({top:0}),G.current&&(G.current.scrollTop=0)}),[n,a]);var Y=function(e){return e.reduce((function(e,t){return e+(t.contract_info.profit||0)}),0)},B=o().createElement(s.DataList,{data_source:E,rowRenderer:function(e){return o().createElement(x,w({onHoverPosition:S,symbol:n,currency:_,addToast:j,onClickCancel:T,onClickSell:O,onClickRemove:A,server_time:v,getContractById:g,is_mobile:N,current_focus:M,removeToast:I,setCurrentFocus:z,should_show_cancellation_warning:D,toggleCancellationWarning:F},e,t))},keyMapper:function(e){return e.id},row_gap:8});return o().createElement(o().Fragment,null,o().createElement("div",{className:p()("positions-drawer__bg",{"positions-drawer__bg--open":L})}),o().createElement("div",{id:"dt_positions_drawer",className:p()("positions-drawer",{"positions-drawer--open":L})},o().createElement("div",{className:"positions-drawer__header"},o().createElement(s.Text,{color:"prominent",weight:"bold",size:"xs"},(0,m.localize)("Open positions")),o().createElement("div",{"data-testid":"dt_positions_drawer_close_icon",id:"dt_positions_drawer_close_icon",className:"positions-drawer__icon-close",onClick:P},o().createElement(s.Icon,{"data-testid":"dt_positions_drawer_close_icon",icon:"IcMinusBold"}))),o().createElement("div",{className:"positions-drawer__body",ref:R},0===E.length||C?o().createElement(b,{error:C}):B),o().createElement("div",{className:"positions-drawer__footer"},E.length>0&&o().createElement("div",{className:"positions-drawer__summary"},o().createElement(s.Text,{size:"xxs",color:"less-prominent",className:"positions-drawer__count"},E.length," ","".concat(E.length>1?(0,m.localize)("open positions"):(0,m.localize)("open position"))),o().createElement("div",{className:"positions-drawer__total"},o().createElement(s.Text,{size:"xs",weight:"bold"},(0,m.localize)("Total P/L:")),o().createElement(s.Text,{size:"xs",weight:"bold",color:Y(E)>0?"profit-success":"loss-danger"},o().createElement(o().Fragment,null,o().createElement(s.Money,{amount:Y(E),currency:_,has_sign:!0})," ",_)))))))}));function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=o().lazy((function(){return r.e("market-countdown-timer").then(r.bind(r,"./src/App/Components/Elements/market-countdown-timer.tsx"))}));const T=function(e){var t=e.is_eu,r=e.is_synthetics_trading_market_available,n=e.onClick,a=e.onMarketOpen,i=e.symbol,c=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o().useState(!0),2),l=c[0],u=c[1],d=o().createElement(m.Localize,{i18n_default_text:"In the meantime, try our synthetic indices. They simulate real-market volatility and are open 24/7."}),f=(0,m.localize)("Try Synthetic Indices");return r||(d=null,f=(0,m.localize)("See open markets")),o().createElement("div",{className:p()("market-is-closed-overlay",{"market-is-closed-overlay--loading":l})},o().createElement(s.Text,{as:"p",className:"market-is-closed-overlay__main-heading",color:"prominent",weight:"bold"},o().createElement(m.Localize,{i18n_default_text:"This market is closed"})),o().createElement(o().Suspense,{fallback:o().createElement(s.UILoader,null)},o().createElement(k,{is_main_page:!0,setIsTimerLoading:u,onMarketOpen:a,symbol:i})),d&&o().createElement(s.Text,{align:"center",as:"p",className:"market-is-closed-overlay__main-message",size:"xs"},d),(!t||t&&r)&&o().createElement(s.Button,{className:"market-is-closed-overlay__button",onClick:n,text:f,primary:!0}))};var O=r("./src/Modules/Contract/Components/Digits/index.ts"),A=r("./src/Modules/Contract/Components/AccumulatorsStats/index.ts"),N=r("./src/Modules/SmartChart/Components/bottom-widgets.tsx"),L=r("./src/Modules/SmartChart/Components/top-widgets.tsx"),P=function(e){return e&&function(t){e({target:{name:"symbol",value:t}})}},j=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),M=(0,_.observer)((function(e){var t=e.digits,r=e.tick,n=(0,h.A)(),a=n.contract_trade,i=n.ui,c=(0,y.P)(),s=c.onChange,l=c.symbol,u=c.contract_type,d=c.last_digit,m=i.is_mobile,f=a.last_contract,p=f.contract_info,_=void 0===p?{}:p,v=f.digits_info,g=void 0===v?{}:v,b=f.display_status,E=f.is_digit_contract,w=f.is_ended;return o().createElement(O.A,{contract_info:_,digits_array:t,digits_info:g,display_status:b,is_digit_contract:E,is_ended:w,is_mobile:m,onDigitChange:s,is_trade_page:!0,tick:r,trade_type:u,selected_digit:d,underlying:l})})),I=(0,_.observer)((function(e){var t=e.open_market,r=e.open,n=(0,h.A)().ui,a=(0,y.P)(),i=a.is_digits_widget_active,c=a.onChange,s=n.is_dark_mode_on?"dark":"light",l=(0,j.Y)().isMobile;return o().createElement(L.A,{open_market:t,open:r,is_mobile:l,is_digits_widget_active:i,onSymbolChange:P(c),theme:s})})),z=function(e){var t=e.digits,r=e.tick,n=e.show_accumulators_stats;return o().createElement(N.A,{Widget:n?o().createElement(A.A,null):o().createElement(M,{digits:t,tick:r})})},D=(0,_.observer)((function(e){var t=e.is_market_closed,n=e.is_trade_enabled,a=(0,h.A)(),c=a.common,s=a.client,l=c.current_language,u=s.is_single_logging_in,d=(0,j.Y)().isMobile,m=o().useMemo((function(){return i()({loader:function(){return d?Promise.all([r.e("hooks_src_useMFAccountStatus_ts-src_Modules_Trading_Helpers_video-config_ts-src_Stores_Module-77c64e"),r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_tsx-src-a7086a"),r.e("screen-small")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-small.tsx")):Promise.all([r.e("hooks_src_useMFAccountStatus_ts-src_Modules_Trading_Helpers_video-config_ts-src_Stores_Module-77c64e"),r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_tsx-src-a7086a"),r.e("screen-large")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-large.tsx"))},loading:function(){return null},render:function(e,t){var r=e.default;return o().createElement(r,t)}})}),[d]);return o().createElement(o().Fragment,{key:l},o().createElement(m,{is_trade_enabled:n,is_market_closed:d?void 0:t,is_single_logging_in:u}))}));const F=o().memo(D);var R=r("./src/Modules/SmartChart/Components/Markers/accumulators-chart-elements.tsx"),W=r("./src/Modules/SmartChart/Components/toolbar-widgets.tsx"),G=r("./src/Modules/SmartChart/index.js");function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function B(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return(t=function(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const V=(0,_.observer)((function(e){var t=e.has_barrier,r=e.is_accumulator,n=e.topWidgets,a=(0,h.A)(),i=a.ui,c=a.common,s=a.contract_trade,l=a.portfolio,u=(0,j.Y)().isMobile,d=s.accumulator_barriers_data,m=s.accumulator_contract_barriers_data,f=s.chart_type,p=s.granularity,_=s.has_crossed_accu_barriers,v=s.markers_array,g=s.updateChartType,b=s.updateGranularity,E=o().useRef(null),w=l.all_positions,x=i.is_chart_countdown_visible,C=i.is_chart_layout_default,S=i.is_dark_mode_on,k=i.is_positions_drawer_on,T=c.current_language,O=c.is_socket_opened,A=(0,y.P)(),N=A.active_symbols,L=A.barriers_flattened,P=A.chartStateChange,M=A.chart_layout,I=A.exportLayout,D=A.has_alternative_source,F=A.is_trade_enabled,Y=A.main_barrier_flattened,U=A.setChartStatus,H=A.show_digits_stats,$=A.symbol,V=A.onChange,J=A.prev_contract_type,K=A.wsForget,Q=A.wsForgetStream,X=A.wsSendRequest,Z=A.wsSubscribe,ee=q(q({countdown:x,isHighestLowestMarkerEnabled:!1,language:T.toLowerCase(),position:C?"bottom":"left",theme:S?"dark":"light"},r?{whitespace:190,minimumLeftBars:u?3:void 0}:{}),t?{whitespace:110}:{}),te=d||{},re=te.current_spot,ne=te.current_spot_time,oe=o().useCallback((function(e){var t=e.digits,n=e.tick;return o().createElement(z,{digits:t,tick:n,show_accumulators_stats:r})}),[r]);o().useEffect((function(){var e,t;(r||H)&&null!==(e=E.current)&&void 0!==e&&e.hasPredictionIndicators()&&(null===(t=E.current)||void 0===t||t.triggerPopup((function(){return V({target:{name:"contract_type",value:J}})})))}),[r,V,J,H]);var ae=Y?[Y].concat(B(L)):L,ie=0===p?8:24;return $&&N.length?o().createElement(G.GR,{ref:E,barriers:ae,contracts_array:v,bottomWidgets:!r&&!H||u?e.bottomWidgets:oe,crosshair:u?0:void 0,crosshairTooltipLeftAllow:560,showLastDigitStats:H,chartControlsWidgets:null,chartStatusListener:function(e){return U(!e,!0)},chartType:f,initialData:{activeSymbols:JSON.parse(JSON.stringify(N))},chartData:{activeSymbols:JSON.parse(JSON.stringify(N))},feedCall:{activeSymbols:!1},enabledNavigationWidget:!u,enabledChartFooter:!1,id:"trade",isMobile:u,maxTick:u?ie:void 0,granularity:H||r?0:p,requestAPI:X,requestForget:K,requestForgetStream:Q,requestSubscribe:Z,settings:ee,allowTickChartTypeOnly:H||r,stateChangeListener:P,symbol:$,topWidgets:F?n:null,isConnectionOpened:O,clearChart:!1,toolbarWidget:function(){return o().createElement(W.A,{updateChartType:g,updateGranularity:b})},importedLayout:M,onExportLayout:I,shouldFetchTradingTimes:!1,hasAlternativeSource:D,getMarketsOrder:function(e){var t="synthetic_index",r=e.some((function(e){return e.market===t}));return e.slice().sort((function(e,t){return e.display_name<t.display_name?-1:1})).map((function(e){return e.market})).reduce((function(e,t){return-1===e.indexOf(t)&&e.push(t),e}),r?[t]:[])},should_zoom_out_on_yaxis:r,yAxisMargin:{top:u?76:106},isLive:!0,leftMargin:!u&&k?328:80},r&&o().createElement(R.A,{all_positions:w,current_spot:re,current_spot_time:ne,has_crossed_accu_barriers:_,should_show_profit_text:!!m.accumulators_high_barrier,symbol:$,is_mobile:u})):null}));var J=r("../../node_modules/@deriv-com/ui/dist/components/Loader/index.js");function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(e,t,r){return(t=function(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(){X=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",f="suspendedYield",p="executing",_="completed",h={};function y(){}function v(){}function g(){}var b={};l(b,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(L([])));w&&w!==r&&n.call(w,i)&&(b=w);var x=g.prototype=y.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==K(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=m;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===_){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=T(c,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?_:f,l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=_,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(K(t)+" is not iterable")}return v.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},C(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(x),l(x,s,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Z(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function ee(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Z(a,n,o,i,c,"next",e)}function c(e){Z(a,n,o,i,c,"throw",e)}i(void 0)}))}}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ne=function(e){var t=e.tick,r=e.digits,n=e.setTick,a=e.setDigits;return o().useEffect((function(){n(t)}),[t]),o().useEffect((function(){a(r)}),[r]),null};const oe=(0,_.observer)((function(){var e=(0,h.A)(),t=e.client,r=e.common,n=e.ui,a=(0,y.P)(),i=a.contract_type,c=a.form_components,u=a.getFirstOpenMarket,d=a.has_barrier,m=a.is_accumulator,f=a.is_chart_loading,_=a.is_market_closed,g=a.is_synthetics_available,b=a.is_synthetics_trading_market_available,E=a.is_trade_enabled,w=a.is_trade_params_expanded,x=a.is_turbos,S=a.is_vanilla,k=a.onMount,O=a.onUnmount,A=a.prepareTradeStore,N=a.setIsDigitsWidgetActive,L=a.setMobileDigitView,P=a.should_show_active_symbols_loading,z=a.show_digits_stats,D=a.symbol,R=n.has_only_forward_starting_contracts,W=n.is_dark_mode_on,G=n.notification_messages_ui,Y=t.is_eu,B=t.is_logged_in,U=t.is_single_logging_in,H=r.network_status,q=(0,j.Y)(),$=q.isDesktop,K=q.isMobile,Z=q.isTabletPortrait,re=te(o().useState([]),2),oe=re[0],ae=re[1],ie=te(o().useState(null),2),ce=ie[0],se=ie[1],le=te(o().useState(!1),2),ue=le[0],de=le[1],me=te(o().useState(!1),2),fe=me[0],pe=me[1],_e=te(o().useState(),2),he=_e[0],ye=_e[1],ve=te(o().useState(),2),ge=ve[0],be=ve[1],Ee=te(o().useState(0),2),we=Ee[0],xe=Ee[1],Ce=te(o().useState(!1),2),Se=Ce[0],ke=Ce[1],Te=o().useRef(null),Oe=o().useRef(null),Ae=w&&(i===l.TRADE_TYPES.MATCH_DIFF||i===l.TRADE_TYPES.OVER_UNDER),Ne=o().useMemo((function(){return ue?{category:"synthetics"}:fe&&he?{category:he,subcategory:ge}:null}),[ue,fe,he,ge]);o().useEffect((function(){sessionStorage.getItem("tradershub_redirect_to")&&B&&sessionStorage.removeItem("tradershub_redirect_to")}),[]),o().useEffect((function(){var e=document.querySelector("html");return Z&&l.isTabletOs&&(ke(!0),f||P||(Te.current=setTimeout((function(){null==e||e.classList.add("tablet-landscape"),Oe.current=setTimeout((function(){ke(!1)}),600)}),500))),function(){null==e||e.classList.remove("tablet-landscape"),Te.current&&clearTimeout(Te.current),Oe.current&&clearTimeout(Oe.current)}}),[Z,f,P]),o().useEffect((function(){if(k(),!g){var e=function(){var e=ee(X().mark((function e(){var t,r,n,o,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=["forex","indices","commodities"],e.next=3,u(r);case 3:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==t;case 7:if(!e.t0){e.next=11;break}e.t2=t,e.next=12;break;case 11:e.t2={};case 12:n=e.t2,o=n.category,a=n.subcategory,o&&(ye(o),be(a));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}return function(){return O()}}),[k,O,u,g]),o().useEffect((function(){K&&ae([]),de(!1),pe(!1)}),[D,ae,de,g]);var Le=o().useCallback((function(e){var t=e.digits,r=e.tick;return o().createElement(ne,{digits:t,tick:r,setTick:se,setDigits:ae})}),[]),Pe=function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g?(de(!0),setTimeout((function(){return de(!1)}))):(pe(!0),setTimeout((function(){return pe(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=o().useCallback((function(){return o().createElement(I,{open_market:Ne,open:ue||fe})}),[Ne,ue,fe]),Me=K?"mobile-wrapper":"sidebar__container",Ie=o().useMemo((function(){return m?"295px":x?"300px":"259px"}),[x,m]);return o().createElement("div",{className:p()("trade-container",Q({},"trade-container--".concat(m?"accumulators":"turbos"),m||x)),id:"trade_container"},$&&o().createElement(C,null),o().createElement(s.Div100vhContainer,{className:"chart-container",height_offset:Ie,id:"chart_container",is_disabled:!K},o().createElement(G,{show_trade_notifications:K}),o().createElement(o().Suspense,{fallback:o().createElement(v.A,{is_dark:W,is_visible:!D||!!f||!!U})},K?o().createElement(o().Fragment,null,o().createElement(v.A,{is_visible:f||U||P}),o().createElement(s.SwipeableWrapper,{className:p()({"vanilla-trade-chart":S}),is_disabled:!z||!E||!c.length||f||U||P,is_swipe_disabled:1===we,onChange:function(e){L(0===e),N(0===e),xe(e)},should_elevate_navigation:Ae},z&&o().createElement(M,{digits:oe,tick:ce}),o().createElement(V,{bottomWidgets:z?Le:void 0,has_barrier:d,is_accumulator:m,topWidgets:je}))):o().createElement("div",{className:p()("chart-container__wrapper",{"vanilla-trade-chart":S})},o().createElement(v.A,{is_visible:f||U||P||Se}),o().createElement(V,{topWidgets:je,is_accumulator:m})))),!Se&&o().createElement("div",{className:Me},_&&!R&&o().createElement(T,{is_eu:Y,is_synthetics_trading_market_available:b,onClick:Pe,onMarketOpen:A,symbol:D}),o().createElement(F,{is_market_closed:_,is_trade_enabled:E&&c.length>0&&"online"===H.class})),Se&&o().createElement(J.a,{isFullScreen:!0}))}));var ae,ie=o().lazy((function(){return(0,l.moduleLoader)((function(){return r.e("contract").then(r.bind(r,"./src/Modules/Contract/index.ts"))}))})),ce={component:o().lazy((function(){return(0,l.moduleLoader)((function(){return Promise.resolve().then(r.bind(r,"./src/Modules/Page404/index.ts"))}))})),getTitle:function(){return(0,m.localize)("Error 404")}};const se=function(){return ae||(ae=[{path:l.routes.contract,component:ie,getTitle:function(){return(0,m.localize)("Contract Details")},is_authenticated:!0},{path:l.routes.trade,component:oe,getTitle:function(){return(0,m.localize)("Trader")},exact:!0}]).push(ce),ae};var le=["active_class","to","children"];function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ue.apply(null,arguments)}var de=o().forwardRef((function(e,t){var r=e.active_class,n=void 0===r?"":r,a=e.to,i=e.children,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,le),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("/")?e:"/".concat(e||"")}(a),l=d(s,se());if(!l)throw new Error("Route not found: ".concat(a));return a?o().createElement(u.NavLink,ue({"data-testid":"dt_binary_link",to:s,activeClassName:n||"active",exact:l.exact,ref:t},c),i):o().createElement("a",ue({"data-testid":"dt_binary_link",ref:t},c),i)}));de.displayName="BinaryLink";const me=de;var fe=r("./src/Modules/Page404/index.ts");function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pe.apply(null,arguments)}const _e=function(e){return o().createElement(u.Route,{exact:e.exact,path:e.path,render:function(t){var r,n,a=null,i=(0,l.removeBranchName)(location.pathname).replace(/\/$/,""),c=function(t){var r,n;return""===t||(null!==(r=e.path)&&void 0!==r&&r.includes(":")?t.substring(0,t.lastIndexOf("/")+1)===e.path.substring(0,e.path.indexOf(":")):e.path===t||!(null===(n=e.routes)||void 0===n||!n.find((function(e){return t===e.path}))))}(i);if(e.component===u.Redirect){var s=e.to;e.path===l.routes.index&&(s=t.location.pathname.toLowerCase().replace(e.path,"")),a=o().createElement(u.Redirect,{to:s})}else if(c&&e.is_authenticated&&!e.is_logging_in&&!e.is_logged_in)(0,l.redirectToLogin)(e.is_logged_in,(0,m.getLanguage)());else{var d=e.routes?e.routes.find((function(e){return e.default})):{},f=!(0,l.isEmptyObject)(d),p=e.component;a=o().createElement(o().Fragment,null,f&&i===e.path&&o().createElement(u.Redirect,{to:null==d?void 0:d.path}),c?o().createElement(p,pe({},t,{routes:e.routes})):o().createElement(fe.default,null))}var _=null!==(r=null===(n=e.getTitle)||void 0===n?void 0:n.call(e))&&void 0!==r?r:"";return document.title="".concat(_," | ").concat(l.default_title),a}})};function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(null,arguments)}const ye=function(e){return o().createElement(o().Suspense,{fallback:o().createElement("div",null)},o().createElement(u.Switch,null,se().map((function(t,r){return o().createElement(_e,he({key:r},t,e))}))))};var ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/dtrader";return e.some((function(e){return!!(0,c.matchPath)(t,{path:e,exact:!0})}))},ge=function(e){var t=e.path_from,r=e.path_to,n=e.action,o=e.match_patterns,a=e.callback;return"PUSH"!==n&&"POP"!==n||a(o.some((function(e){return ve(e.from,t)&&ve(e.to,r)}))),!0},be=i()({loader:function(){return r.e("error-component").then(r.bind(r,"./src/App/Components/Elements/Errors/index.ts"))},loading:function(){return o().createElement(s.UILoader,null)},render:function(e,t){var r=e.default;return o().createElement(r,t)}}),Ee=(0,_.observer)((function(e){var t=e.history,r=e.passthrough,n=(0,h.A)(),a=n.client,i=n.common,c=n.ui,s=n.portfolio,u=(0,y.P)().setSkipPrePostLifecycle,d=i.error,m=i.has_error,f=s.onUnmount,p=a.is_logged_in,_=a.is_logging_in,v=c.setPromptHandler;return o().useEffect((function(){return v&&v(!0,(function(e,r){return ge({path_from:t.location.pathname,path_to:e.pathname,match_patterns:[{from:se().flatMap((function(e){return e.routes?e.routes.map((function(e){return e.path})):[e.path]})).filter((function(e){return e&&e!==l.routes.mt5&&e!==l.routes.dxtrade})),to:[l.routes.mt5,l.routes.dxtrade]}],action:r,callback:function(e){e&&f()}}),ge({path_from:t.location.pathname,path_to:e.pathname,match_patterns:[{from:[l.routes.contract],to:[l.routes.trade]},{from:[l.routes.trade],to:[l.routes.contract]}],action:r,callback:u})})),function(){null==v||v(!1)}}),[]),o().useEffect((function(){return function(){return f()}}),[f]),m?o().createElement(be,d):o().createElement(ye,{is_logged_in:p,is_logging_in:_,passthrough:r})}));const we=(0,c.withRouter)(Ee);var xe=r("mobx"),Ce=r("../../node_modules/react-transition-group/esm/TransitionGroup.js"),Se=r("./src/App/Components/Elements/ContentLoader/index.ts");const ke=function(e){var t=e.is_visible,r="won"===e.result;return o().createElement(o().Fragment,null,o().createElement(g.A,{in:t,timeout:250,classNames:{enter:"positions-modal-card__result--enter",enterDone:"positions-modal-card__result--enter-done",exit:"positions-modal-card__result--exit"},unmountOnExit:!0},o().createElement("div",{className:"positions-modal-card__caption-wrapper","data-testid":"result_mobile"},o().createElement("span",{className:p()("positions-modal-card__caption",{"positions-modal-card__caption--won":r,"positions-modal-card__caption--lost":!r})},o().createElement(s.Icon,{icon:"IcPositionClosed",className:"positions-modal-card__icon",color:r?"green":"red"}),o().createElement("span",null,(0,l.getCardLabels)().CLOSED)))))},Te=(0,_.observer)((function(e){var t,r=e.className,n=e.contract_info,a=e.contract_update,i=e.currency,c=e.current_tick,u=e.id,d=e.is_loading,m=e.is_sell_requested,f=e.onClickSell,_=e.profit_loss,v=e.onClickCancel,g=e.result,b=e.togglePositions,E=(0,h.A)(),w=E.ui,x=E.common,C=E.contract_trade,S=(0,y.P)().active_symbols,k=x.server_time,T=C.getContractById,O=w.addToast,A=w.current_focus,N=w.is_mobile,L=w.removeToast,P=w.setCurrentFocus,j=w.should_show_cancellation_warning,M=w.toggleCancellationWarning,I=o().createElement("div",{className:"positions-modal-card__content-loader"},o().createElement(Se.Y,{speed:2})),z=n.barrier,D=n.bid_price,F=n.buy_price,R=n.contract_type,W=n.date_expiry,G=n.date_start,Y=n.entry_spot_display_value,B=n.is_sold,U=n.profit,H=n.sell_price,q=n.shortcode,$=n.tick_count,V=n.underlying,J=(0,l.getCardLabels)(),K=J.STAKE,Q=J.CONTRACT_VALUE,X=J.ENTRY_SPOT,Z=J.STRIKE,ee=J.TOTAL_PROFIT_LOSS,te=(0,l.isMultiplierContract)(R),re=(0,l.isAccumulatorContract)(R),ne=(0,l.isTurbosContract)(R),oe=(0,l.isVanillaContract)(R),ae=(0,l.isCryptoContract)(V),ie=!te||ae&&te,ce=!!(0,l.getEndTime)(n),se=_>=0?"won":"lost",le=(0,l.getSymbolDisplayName)(S,(0,l.getMarketInformation)(q||"").underlying),ue=o().createElement(o().Fragment,null,o().createElement(s.ContractCard.Header,{contract_info:n,display_name:le,getCardLabels:l.getCardLabels,getContractTypeDisplay:l.getContractTypeDisplay,has_progress_slider:!N&&ie,is_mobile:N,is_sell_requested:m,onClickSell:f,server_time:k}),o().createElement(s.CurrencyBadge,{currency:null!==(t=null==n?void 0:n.currency)&&void 0!==t?t:""}),o().createElement("div",{className:p()("positions-modal-card__grid","positions-modal-card__grid-body")},o().createElement("div",{className:p()("positions-modal-card__grid-profit-payout")},o().createElement("div",{className:"positions-modal-card__purchase-price"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},K),o().createElement(s.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},o().createElement(s.Money,{amount:F,currency:i}))),o().createElement("div",{className:"positions-modal-card__payout-price"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},Q),o().createElement(s.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},o().createElement("div",{className:p()({"dc-contract-card--loss":Number(U)<0,"dc-contract-card--profit":Number(U)>0})},o().createElement(s.Money,{amount:B?H:D,currency:i}))))),o().createElement("div",{className:p()("positions-modal-card__grid-price-payout")},o().createElement("div",{className:"positions-modal-card__purchase-price"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},X),o().createElement(s.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},(0,l.addComma)(Y))),o().createElement("div",{className:"positions-modal-card__payout-price"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},Z),o().createElement(s.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},(0,l.addComma)(z)))),g||B?o().createElement(ke,{is_visible:!!B,result:g||se}):o().createElement(s.ProgressSliderMobile,{className:"positions-modal-card__progress",current_tick:c,getCardLabels:l.getCardLabels,is_loading:d,start_time:G,expiry_time:W,server_time:k,ticks_count:$})),o().createElement("div",{className:p()("positions-modal-card__item",r)},o().createElement("div",{className:"dc-contract-card-item__header"},ee),o().createElement("div",{className:p()("dc-contract-card-item__body",{"dc-contract-card-item__body--crypto":(0,l.isCryptocurrency)(i),"dc-contract-card-item__body--loss":Number(U)<0,"dc-contract-card-item__body--profit":Number(U)>0})},o().createElement(s.Money,{amount:U,currency:i}),!B&&o().createElement(s.ArrowIndicator,{className:"dc-contract-card__indicative--movement",value:U}))),o().createElement(s.ContractCard.Footer,{contract_info:n,getCardLabels:l.getCardLabels,is_multiplier:te,is_sell_requested:m,onClickCancel:v,onClickSell:f,server_time:k})),de=o().createElement(s.ContractCard.Header,{contract_info:n,display_name:le,getCardLabels:l.getCardLabels,getContractTypeDisplay:l.getContractTypeDisplay,has_progress_slider:!N&&ie||re,is_mobile:N,is_sell_requested:m,onClickSell:f,server_time:k}),fe=o().createElement(s.ContractCard.Body,{addToast:O,contract_info:n,contract_update:a,currency:i,current_focus:A,getCardLabels:l.getCardLabels,getContractById:T,is_accumulator:re,is_mobile:N,is_multiplier:te,is_positions:!0,is_sold:!!B,is_turbos:ne,has_progress_slider:N&&ie&&!ce,removeToast:L,server_time:k,setCurrentFocus:P,should_show_cancellation_warning:j,toggleCancellationWarning:M}),pe=o().createElement(s.ContractCard.Footer,{contract_info:n,getCardLabels:l.getCardLabels,is_multiplier:te,is_sell_requested:m,onClickCancel:v,onClickSell:f,server_time:k}),_e=o().createElement(o().Fragment,null,o().createElement(s.ContractCard,{contract_info:n,getCardLabels:l.getCardLabels,is_multiplier:te,profit_loss:_,should_show_result_overlay:!1},de,fe,pe)),he=oe?ue:_e;return o().createElement("div",{id:"dt_drawer_card_".concat(u),className:p()("positions-modal-card__wrapper",r)},o().createElement(me,{onClick:b,className:p()("positions-modal-card","dc-contract-card",{"positions-modal-card--multiplier":te,"dc-contract-card--green":_>0,"dc-contract-card--red":_<0}),to:(0,l.getContractPath)(u)},V?he:I))})),Oe=function(e){var t=e.positions_count,r=e.is_open,n=e.togglePositions,a=p()("positions-toggle",{"positions-toggle--active":r,"positions-toggle--has-count":t>0});return o().createElement("a",{id:"dt_positions_toggle","data-testid":"dt_positions_toggle",className:a,onClick:n,"data-count":t},o().createElement(s.Icon,{data_testid:"dt_icon",icon:"IcPortfolio",className:"positions-toggle__icon"}))};function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ae.apply(null,arguments)}function Ne(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const je=(0,_.observer)((function(e){var t=e.active_positions_count,r=e.currency,n=e.error,a=e.filtered_positions,i=e.is_empty,c=e.onClickSell,d=e.onClickCancel,f=(0,h.A)().ui,p=f.togglePositionsDrawer,_=f.is_positions_drawer_on,y=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o().useState([]),2),v=y[0],E=y[1],w=(0,j.Y)(),x=w.isMobile,C=w.isTablet,S=(0,u.useLocation)(),k=null==S?void 0:S.pathname,T=(0,l.isDisabledLandscapeBlockerRoute)(k),O=k===l.routes.trade&&l.isTabletOs,A=!(!x&&(0,l.isMobileOs)()&&(k.startsWith(l.routes.trade)||k.startsWith(l.routes.reports)||k.startsWith("/contract")))&&(T||O),N=a.filter((function(e){return v.every((function(t){return t!==e.contract_info.contract_id}))})).slice(0,5),L=N.filter((function(e){var t;return null===(t=e.contract_info)||void 0===t?void 0:t.is_sold})).map((function(e){return e.contract_info.contract_id})),P=function(){E(Ne(new Set([].concat(Ne(v),Ne(L))))),p()},M=o().createElement(o().Fragment,null,o().createElement(Ce.A,{component:"div"},N.map((function(e){return o().createElement(g.A,{appear:!0,key:e.id,in:!0,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},unmountOnExit:!0},o().createElement(Te,Ae({onClickSell:c,onClickCancel:d,key:e.id,currency:r,togglePositions:p},e)))}))));return o().createElement(o().Fragment,null,o().createElement(Oe,{is_open:_,togglePositions:p,positions_count:t}),A&&o().createElement(s.Modal,{is_open:_,toggleModal:P,id:"dt_mobile_positions",is_vertical_top:!0,has_close_icon:!0,width:x?"calc(100vw - 32px)":void 0,className:"toggle-positions"},o().createElement(s.Div100vhContainer,{className:"positions-modal",height_offset:C?"16rvh":"48px"},o().createElement("div",{className:"positions-modal__header"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal__title"},o().createElement(s.Icon,{icon:"IcPortfolio",className:"positions-modal__title-icon"}),(0,m.localize)("Recent positions")),o().createElement("div",{className:"positions-modal__close-btn",onClick:P},o().createElement(s.Icon,{data_testid:"dt_modal_header_close",icon:"IcMinusBold"}))),o().createElement("div",{className:"positions-modal__body"},i||!N.length||n?o().createElement(b,{error:n}):M),o().createElement("div",{className:"positions-modal__footer"},o().createElement(u.NavLink,{onClick:P,className:"dc-btn dc-btn--secondary dc-btn__large positions-modal__footer-btn",to:l.routes.positions},o().createElement(s.Text,{size:"xs",weight:"bold"},(0,m.localize)("Go to Reports")))))))}));var Me=r("./src/App/Components/Elements/PositionsDrawer/helpers/index.ts");const Ie=(0,_.observer)((function(){var e=(0,h.A)(),t=e.portfolio,r=e.client,n=(0,y.P)(),a=n.symbol,i=n.contract_type,c=r.currency,s=t.active_positions_count,u=t.all_positions,d=t.error,m=t.onClickSell,f=t.onClickCancel,p=u.filter((function(e){return(0,l.isContractSupportedAndStarted)(a,e.contract_info)&&((0,l.isTurbosContract)(i)||(0,l.isVanillaContract)(i)?(0,Me.i4)(e.contract_info,(0,l.isTurbosContract)(i)?l.TRADE_TYPES.TURBOS.SHORT:l.TRADE_TYPES.VANILLA.CALL)||(0,Me.i4)(e.contract_info,(0,l.isTurbosContract)(i)?l.TRADE_TYPES.TURBOS.LONG:l.TRADE_TYPES.VANILLA.PUT):(0,Me.i4)(e.contract_info,i))}));return o().createElement(je,{active_positions_count:s,currency:c,error:d,filtered_positions:p,is_empty:!p.length,onClickSell:m,onClickCancel:f})}));var ze=r("./src/trader-providers.tsx");function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Fe(){Fe=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",f="suspendedYield",p="executing",_="completed",h={};function y(){}function v(){}function g(){}var b={};l(b,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(L([])));w&&w!==r&&n.call(w,i)&&(b=w);var x=g.prototype=y.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==De(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=m;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===_){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=T(c,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?_:f,l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=_,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(De(t)+" is not iterable")}return v.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},C(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(x),l(x,s,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Re(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}const We=(0,_.observer)((function(e){var t=e.store,r=(0,h.A)(),n=r.client,a=r.modules,i=r.ui,c=r.portfolio,s=i.populateHeaderExtensions,u=c.onMount,d=n.is_logged_in,m=n.is_populating_account_list,f=a.cashier.general_store,p=f.onMountCommon,_=f.setAccountSwitchListener,y=(0,j.Y)().isDesktop,v=location.pathname!==l.routes.mt5,g=d&&v&&!y,b=o().useCallback((function(){var e=g?o().createElement(ze.A,{store:t},o().createElement(Ie,null)):null;s(e)}),[g,t,s]);return o().useEffect((function(){var e=function(){var e,t=(e=Fe().mark((function e(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y||!v){e.next=9;break}return e.next=3,(0,xe.when)((function(){return!m}));case 3:if(!d){e.next=9;break}return e.next=6,l.WS.wait("authorize");case 6:u(),p(!0),_();case 9:b();case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Re(a,n,o,i,c,"next",e)}function c(e){Re(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return e().catch((function(){})),function(){return s(null)}}),[p,u,b,s,_,t,v,y,d,m]),o().useEffect((function(){b()}),[b]),null}));var Ge=(0,_.observer)((function(e){var t=e.location,r=(0,h.A)(),n=r.client,a=r.portfolio,i=r.ui,c=n.is_logged_in,s=a.active_positions_count,u=i.is_positions_drawer_on,d=i.populateFooterExtensions,m=i.togglePositionsDrawer;o().useEffect((function(){return p()})),o().useEffect((function(){return function(){return d([])}}),[]);var f=function(){return o().createElement(Oe,{is_open:u,togglePositions:m,positions_count:s})},p=function(){var e=t.pathname===l.routes.trade;d(c&&e?[{position:"left",Component:f}]:[])};return null}));const Ye=(0,u.withRouter)(Ge);var Be=i()({loader:function(){return r.e("settings-chart").then(r.bind(r,"./src/App/Containers/SettingsModal/settings-chart.tsx"))},loading:function(){return o().createElement(s.UILoader,null)}});const Ue=(0,_.observer)((function(e){var t=e.store,r=(0,h.A)().ui.populateSettingsExtensions;return o().useEffect((function(){return function(){return r(null)}}),[r]),o().useEffect((function(){return function(){var e=[{icon:"IcChart",label:(0,m.localize)("Charts"),value:function(e){return function(e,t){return o().createElement(ze.A,{store:t},o().createElement(Be,e))}(e,t)}}];r(e)}()})),null}));var He=r("./src/Modules/Trading/Containers/toast-popup.tsx"),qe=r("./src/App/init-store.ts"),$e=r("./src/Stores/Providers/modules-providers.tsx"),Ve=i()({loader:function(){return r.e("trade-modals").then(r.bind(r,"./src/App/Containers/Modals/index.ts"))},loading:function(){return null}});const Je=function(e){var t=e.passthrough,r=(0,qe.A)(t.root_store,t.WS);return o().useEffect((function(){return function(){return r.ui.setPromptHandler(!1)}}),[r]),o().createElement(ze.A,{store:r},o().createElement($e.A,{store:r},o().createElement(we,null),o().createElement(Ve,null),o().createElement(He.C,null),o().createElement(We,{store:r}),o().createElement(Ye,null),o().createElement(Ue,{store:r})))}},"./src/Modules/Contract/Components/AccumulatorsStats/index.ts":(e,t,r)=>{r.d(t,{A:()=>E});var n=r("react"),o=r.n(n),a=r("../../node_modules/classnames/index.js"),i=r.n(a),c=r("@deriv/components"),s=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),l=r("@deriv/translations");const u=o().memo((function(e){var t=e.has_progress_dots,r=e.progress_dots_testid,n=e.should_emphasize_last_counter,a=e.ticks_history_counter_testid,c=e.value,s=n&&t&&0===c;return o().createElement("div",{"data-testid":a,className:i()("accumulators-stats__history-counter",{"accumulators-stats__history-counter--emphasized":s})},c,t&&o().createElement("div",{className:"accumulators-stats__progress-dots","data-testid":r},[1,2,3].map((function(e){return o().createElement("span",{key:"ticks-dot-counter".concat(e),className:"dot-".concat(e)})}))))}));const d=o().memo((function(e){var t=e.history_text_size,r=e.rows;return o().createElement(c.Text,{size:t,className:"accumulators-stats__history--expanded"},r.map((function(e,t){return o().createElement("div",{key:t.toString()+e[0],"data-testid":"dt_accu_stats_history_row",className:"accumulators-stats__row"},e.map((function(e,r){return o().createElement(u,{ticks_history_counter_testid:"dt_accu_stats_history_counter",key:r.toString()+e,value:e,has_progress_dots:0===t&&0===r})})))})))}));var m=r("@deriv/shared");function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=e.icon_classname,r=e.is_dark_theme,n=e.is_manual_open,a=e.title,i=e.toggleManual,s=f(o().useState(!0),2),u=s[0],d=s[1],p=(0,m.isMobile)(),_=o().useCallback((function(e){return(0,m.getUrlBase)("/public/videos/accumulators_manual_".concat(p?"mobile":"desktop").concat(r?"_dark":"",".").concat(e))}),[p,r]),h=o().useMemo((function(){return _("mp4")}),[_]),y=o().useMemo((function(){return _("webm")}),[_]);return o().createElement(o().Fragment,null,o().createElement(c.Icon,{icon:"IcInfoOutline",onClick:i,size:16,className:t,data_testid:"dt_ic_info_icon"}),o().createElement(c.Modal,{is_open:n&&!!h&&!!y,should_header_stick_body:!1,title:a,toggleModal:i,width:p?"328px":"596px",className:"accumulators-stats-manual-modal"},o().createElement(c.Modal.Body,{className:"accumulators-stats-modal-body"},o().createElement("div",{className:"accumulators-stats-modal-body__video"},u&&o().createElement(c.Loading,{is_fullscreen:!1}),o().createElement("video",{autoPlay:!0,"data-testid":"dt_accumulators_stats_manual_video",loop:!0,onLoadedData:function(){return d(!1)},playsInline:!0,preload:"auto",width:p?296:563},o().createElement("source",{src:h,type:"video/mp4"}),o().createElement("source",{src:y,type:"video/webm"}),(0,l.localize)("Unfortunately, your browser does not support the video."))),o().createElement(c.Text,{as:"p",size:p?"xs":"s",color:"prominent",className:"accumulators-stats-modal-body__text"},(0,l.localize)("Stats show the history of consecutive tick counts, i.e. the number of ticks the price remained within range continuously.")))))},h=r("./src/Stores/useTraderStores.tsx"),y=r("mobx-react-lite"),v=r("../stores/src/useStore.ts");function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const E=(0,y.observer)((function(e){var t,r,n=e.is_expandable,a=void 0===n||n,m=(0,v.A)().ui,f=(0,h.P)().ticks_history_stats,p=void 0===f?{}:f,y=m.is_dark_mode_on,b=(0,s.Y)(),E=b.isDesktop,w=b.isMobile,x=g(o().useState(!0),2),C=x[0],S=x[1],k=g(o().useState(!1),2),T=k[0],O=k[1],A=(0,l.localize)("Stats"),N=null!==(t=null==p?void 0:p.ticks_stayed_in)&&void 0!==t?t:[],L=E||!C?"xxs":"xxxs",P=N.reduce((function(e,t,r){var n=w?C?15:5:10;return r%n==0&&e.push(N.slice(r,r+n)),e}),[]);return N.length?o().createElement("div",{className:"accumulators-stats"},o().createElement("div",{className:i()("accumulators-stats__container--collapsed")},o().createElement("div",{className:"accumulators-stats__title"},o().createElement(_,{is_dark_theme:y,icon_classname:"info",is_manual_open:T,title:A,toggleManual:function(){return O(!T)}}),o().createElement(c.Text,{weight:"bold",size:w?"xxxs":"xxs",className:"accumulators-stats__title-text"},A)),o().createElement(c.Text,{size:L,className:"accumulators-stats__history"},C?null===(r=P[0])||void 0===r?void 0:r.map((function(e,t){return o().createElement(u,{ticks_history_counter_testid:"dt_accu_stats_history_counter",key:t,value:e,has_progress_dots:0===t})})):o().createElement("div",{className:"accumulators-stats__history-heading"},(0,l.localize)("Number of ticks")))),a&&!C&&(E?o().createElement(d,{history_text_size:L,rows:P}):o().createElement(c.MobileDialog,{onClose:function(){return S(!C)},portal_element_id:"modal_root",title:A,visible:!C,wrapper_classname:"accumulators-stats"},o().createElement(d,{history_text_size:L,rows:P}))),a&&o().createElement(c.Icon,{icon:C?"IcArrowUp":"IcArrowDown",onClick:function(){return S(!C)},className:"accordion-toggle-arrow",data_testid:"dt_accordion-toggle-arrow"})):null}))},"./src/Modules/Trading/Containers/toast-popup.tsx":(e,t,r)=>{r.d(t,{C:()=>y,u:()=>_});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),a=r("react"),i=r.n(a),c=r("react-dom"),s=r.n(c),l=r("@deriv/components"),u=r("mobx-react-lite"),d=r("../stores/src/useStore.ts"),m=["portal_id","children","className"];function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}var _=function(e){var t=e.portal_id,r=void 0===t?"popup_root":t,n=e.children,a=e.className,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,m),u=document.getElementById(r);return u?s().createPortal(i().createElement(l.Toast,p({className:o()("dc-toast-popup",a)},c),n),u):null},h=function(e){var t=e.status,r=e.portal_id,n=e.message,a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useState(!1),2),c=a[0],u=a[1],d=document.getElementById(r);return d&&n?(c||"online"===t?c&&"online"===t&&setTimeout((function(){u(!1)}),1500):u(!0),s().createPortal(i().createElement(l.MobileWrapper,null,i().createElement(l.Toast,{className:o()({"dc-toast--blinker":"blinker"===t}),is_open:c,timeout:0,type:"error"},n)),d)):null},y=(0,u.observer)((function(){var e=(0,d.A)().common.network_status;return i().createElement(h,{portal_id:"popup_root",message:e.tooltip,status:e.class})}))}}]);