/*! For license information please see trader.screen-large.664135321b7d3319f9e1.js.LICENSE.txt */
"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["screen-large"],{"./src/Modules/Trading/Components/Form/screen-large.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ye});var r=n("../../node_modules/classnames/index.js"),a=n.n(r),o=n("react"),i=n.n(o),l=n("./src/App/Components/Elements/ContentLoader/index.ts"),u=n("./src/App/Components/Form/fieldset.tsx"),c=n("./src/Modules/Trading/Containers/contract-type.tsx"),s=n("./src/Modules/Trading/Containers/purchase.tsx"),m=n("@deriv/shared"),d=n("@deriv/components"),f=n("@deriv/translations"),_=n("./src/Stores/Modules/Trading/Helpers/allow-equals.ts");const p=function(e){var t=e.contract_start_type,n=e.contract_type,r=e.contract_types_list,a=e.duration_unit,o=e.expiry_type,l=e.onChange,u=e.value,c=e.has_equals_only,s=(0,_.jZ)(r,a,t),m=(0,_.KM)(r);return(0,_.tP)(n)&&(s||"endtime"===o)&&m&&i().createElement("div",{className:"allow-equals"},i().createElement(d.Checkbox,{className:"allow-equals__input-field",id:"dt_allow_equals_input",onChange:function(e){if(e.persist(),"checked"in e.target){var t=e.target,n=t.name,r=t.checked;l({target:{name:n,value:Number(r)}})}},defaultChecked:!!u,name:"is_equal",label:(0,f.localize)("Allow equals"),classNameLabel:"allow-equals__label",disabled:c}),i().createElement(d.Popover,{alignment:"left",classNameTarget:"allow-equals__tooltip",icon:"info",id:"dt_allow_equals_info",message:(0,f.localize)("Win payout if exit spot is also equal to entry spot."),margin:130,relative_render:!0}))};var y=n("./src/Stores/useTraderStores.tsx"),v=n("mobx-react-lite"),h=(0,v.observer)((function(){var e=(0,y.P)(),t=e.multiplier,n=e.multiplier_range_list,r=e.onChange;return i().createElement(d.Dropdown,{test_id:m.TRADE_TYPES.MULTIPLIER,className:"trade-container__multiplier-dropdown",is_alignment_left:!0,list:n,name:m.TRADE_TYPES.MULTIPLIER,no_border:!0,value:t,onChange:r})}));const g=h;var b=n("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/info.tsx"),E=n("./src/Modules/Trading/Components/Form/TradeParams/min-max-stake-info.tsx"),x=n("../stores/src/useStore.ts");function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(e,t,n){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){var t=e.amount,n=e.currency,r=e.current_focus,a=e.error_messages,o=e.is_single_currency,l=e.is_disabled,u=e.onChange,c=e.setCurrentFocus;return i().createElement(d.InputField,{className:"trade-container__amount",classNameInlinePrefix:"trade-container__currency",classNameInput:"trade-container__input",currency:n,current_focus:r,error_messages:a,fractional_digits:(0,m.getDecimalPlaces)(n),id:"dt_amount_input",inline_prefix:o?n:void 0,is_autocomplete_disabled:!0,is_float:!0,is_hj_whitelisted:!0,is_incrementable:!0,is_negative_disabled:!0,is_disabled:l,max_length:m.AMOUNT_MAX_LENGTH,name:"amount",onChange:u,type:"tel",value:t,ariaLabel:(0,f.localize)("Amount"),setCurrentFocus:c})},A=(0,v.observer)((function(e){var t,n=e.is_minimized,r=void 0!==n&&n,o=(0,x.A)(),l=o.ui,c=o.client,s=c.currencies_list,_=c.is_single_currency,v=l.setCurrentFocus,h=l.current_focus,w=(0,y.P)(),A=w.amount,k=w.basis,M=w.basis_list,N=w.contract_start_type,T=w.contract_type,j=w.contract_types_list,O=w.currency,P=w.duration_unit,D=w.expiry_type,I=w.is_accumulator,F=w.is_equal,L=w.is_multiplier,z=w.is_turbos,U=w.is_vanilla,Y=w.has_equals_only,H=w.has_open_accu_contract,q=w.stake_boundary,G=w.onChange,B=w.validation_errors,$=q[T.toUpperCase()]||{},R=$.min_stake,V=$.max_stake;if(r)return i().createElement("div",{className:"fieldset-minimized fieldset-minimized__amount"},i().createElement("span",{className:"fieldset-minimized__basis"},null===(t=M.find((function(e){return e.value===k})))||void 0===t?void 0:t.text)," ",i().createElement("i",null,i().createElement("span",{className:a()("fieldset-minimized__currency","symbols",C({},"symbols--".concat((O||"").toLowerCase()),O))})),(0,m.addComma)(A,2));var W=null==B?void 0:B.amount,X=function(e){var t=e.target;G({target:t})};return i().createElement(i().Fragment,null,L&&i().createElement(u.A,{className:"trade-container__fieldset center-text",header:(0,f.localize)("Multiplier")},i().createElement(g,null)),i().createElement(u.A,{className:"trade-container__fieldset center-text",header:T===m.TRADE_TYPES.HIGH_LOW||L||I||U||z?(0,f.localize)("Stake"):void 0},M.length>1&&i().createElement(d.ButtonToggle,{id:"dt_amount_toggle",buttons_arr:M.map((function(e){return{text:e.text,value:e.value}})),className:"dropdown--no-margin",is_animated:!0,name:"basis",onChange:G,value:k}),_?i().createElement(S,{amount:A,currency:O,current_focus:h,error_messages:W,is_single_currency:_,is_disabled:H,onChange:X,setCurrentFocus:v}):i().createElement("div",{className:"trade-container__currency-options"},i().createElement(S,{amount:A,currency:O,current_focus:h,error_messages:W,is_single_currency:_,onChange:X,setCurrentFocus:v}),i().createElement(d.Dropdown,{className:a()({"dc-dropdown-container__currency":!_}),is_alignment_left:!0,is_nativepicker:!1,list:s,name:"currency",initial_offset:256,no_border:!0,value:O,onChange:G})),i().createElement(p,{contract_start_type:N,contract_type:T,contract_types_list:j,duration_unit:P,expiry_type:D,onChange:function(e){var t=e.target;G({target:t})},value:Number(F),has_equals_only:Y}),L&&i().createElement(i().Fragment,null,i().createElement(b.A,{className:"trade-container__multipliers-trade-info",should_show_tooltip:!0,is_tooltip_relative:!0})),(z||U)&&i().createElement(E.A,{currency:O,max_stake:V,min_stake:R})))}));const k=A;var M=n("./src/Modules/Trading/Components/Form/TradeParams/barrier.tsx"),N=n("./src/Modules/Trading/Components/Form/TradeParams/Turbos/payout-selector.tsx");function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const j=function(e){var t=e.hover_value,n=e.max_value,r=e.min_value,o=e.onClick,l=e.onMouseEnter,u=e.onMouseLeave,c=e.value;if(!n||!r)return null;var s=function(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(n-r+1).keys()),m=function(e){return e+r===c},d=function(e){return e+r<c},f=function(e){return!d(e)&&e+r<=t};return i().createElement(i().Fragment,null,s.map((function(e){return i().createElement("span",{"data-testid":"tick_step_".concat(e+r),key:e,"data-value":e+r,className:a()("range-slider__ticks-step",{"range-slider__ticks-step--active":m(e),"range-slider__ticks-step--marked":d(e),"range-slider__ticks-step--marked-hover":f(e)}),onClick:function(){return o(e+r)},onKeyDown:function(){return o(e+r)},onMouseEnter:function(){return l(e+r)},onMouseLeave:u})})))};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const P=function(e){var t=e.className,n=e.name,r=e.value,o=e.min_value,l=e.max_value,u=e.onChange,c=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useState(0),2),s=c[0],m=c[1],_=i().useRef(null),p=function(e){var t=e.nativeEvent,n=t.offsetX,r=t.offsetY;(r<=-3||r>=3||n<-3||n>3)&&v()},y=function(e,t){return"".concat(10/(l-o)*(e-o)*2+(t?.8:1.4),"em")},v=function(){s&&_.current&&(m(0),_.current.style.width="0")},h=s||r;return i().createElement("div",{className:a()("range-slider",t,{"range-slider__error":r<o||r>l})},i().createElement("label",{className:"range-slider__label",htmlFor:"range"},i().createElement("input",{className:"input trade-container__input range-slider__track",id:"dt_duration_range_input",max:l||void 0,min:o||void 0,name:n,onChange:function(e){var t=+e.target.value;t!==r&&(v(),u({target:{name:n,value:t}}))},tabIndex:0,type:"range",value:r,"aria-label":"range-input"}),i().createElement("span",{ref:_,className:"range-slider__line range-slider__line--fill",onMouseLeave:p}),i().createElement("div",{className:"range-slider__ticks"},i().createElement(j,{hover_value:s,max_value:l,min_value:o,onClick:function(e){e!==r&&(v(),u({target:{name:n,value:e}}))},onMouseLeave:p,onMouseEnter:function(e){e&&_.current&&(m(e),_.current.style.width=y(e,!0))},value:r})),i().createElement("div",{className:"range-slider__line",style:{width:"".concat(y(r))}})),i().createElement("div",{className:"range-slider__caption"},!!h&&i().createElement(d.Text,{align:"center",weight:"bold",size:"xs",color:"prominent",id:"dt_range_slider_label"},1===h&&(0,f.localize)("{{display_value}} Tick",{display_value:h}),h>1&&(0,f.localize)("{{display_value}} Ticks",{display_value:h}))))},D=function(e){var t=e.name,n=e.onChange,r=e.value,o=a()("advanced-simple-toggle__icon","select-arrow",{"advanced-simple-toggle__icon--active":r});return i().createElement("button",{id:r?"dt_advanced_toggle":"dt_simple_toggle",className:"advanced-simple-toggle",onClick:function(){n({target:{value:!r,name:t}})},"aria-label":(0,f.localize)("Toggle between advanced and simple duration settings")},i().createElement(d.Icon,{icon:"IcChevronDown",className:o}))};var I=n("./src/Stores/Modules/Trading/Helpers/contract-type.ts");function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function L(){L=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),l=new T(r||[]);return a(i,"_invoke",{value:A(e,n,l)}),i}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="suspendedYield",_="executing",p="completed",y={};function v(){}function h(){}function g(){}var b={};c(b,i,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(j([])));x&&x!==n&&r.call(x,i)&&(b=x);var w=g.prototype=v.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,o,i,l){var u=m(e[a],e,o);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==F(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function A(t,n,r){var a=d;return function(o,i){if(a===_)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var u=k(l,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=_;var c=m(t,n,r);if("normal"===c.type){if(a=r.done?p:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=p,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=m(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(F(t)+" is not iterable")}return h.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:h,configurable:!0}),h.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},C(S.prototype),c(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new S(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(w),c(w,u,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;N(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function z(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){U(o,r,a,i,l,"next",e)}function l(e){U(o,r,a,i,l,"throw",e)}i(void 0)}))}}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const B=(0,v.observer)((function(e){var t,n,r=e.id,o=e.is_24_hours_contract,l=e.mode,u=e.name,c=(0,x.A)().common.server_time,s=(0,y.P)(),_=s.duration,p=s.duration_min_max,v=s.duration_units_list,h=s.expiry_type,g=s.onChange,b=s.start_date,E=s.start_time,w=s.symbol,C=s.validation_errors,S=(0,m.useIsMounted)(),A=function(){return"duration"===l},k=H(i().useState([]),2),M=k[0],N=k[1],T=H(i().useState([]),2),j=T[0],O=T[1],P=H(i().useState(_),2),D=P[0],F=P[1],U=H(i().useState((function(){if(!A()&&"endtime"===h)return(0,m.toMoment)((0,m.getTomorrowDate)(c))})),2),q=U[0],G=U[1];i().useEffect((function(){W()}),[]),i().useEffect((function(){D!==_&&F(_)}),[_]);var B,$=function(){var e,t;return(0,m.setTime)((0,m.toMoment)((0,m.hasIntradayDurationUnit)(v)?(0,m.toMoment)(c).clone():(0,m.toMoment)(c).clone().add(null==p||null===(t=p.daily)||void 0===t?void 0:t.min,"second")),(0,m.isTimeValid)(null!=E?E:"")?E:null!==(e=null==c?void 0:c.format("HH:mm:ss"))&&void 0!==e?e:"")},R=function(){return p.daily?p.daily.max:31536e3},V=function(){var e="duration"===h,t=$().clone().startOf("day");return e&&(0,m.hasIntradayDurationUnit)(v)?t.add(1,"day"):t},W=i().useCallback(Y(L().mark((function e(){var t,n,r,a,o,i,l,u=arguments;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:(0,m.toMoment)().format("YYYY-MM-DD"),n=[],r=[],e.next=5,Promise.all([I.h.getTradingEvents(t,w),I.h.getTradingDays(t,w)]);case 5:a=e.sent,o=H(a,2),i=o[0],(l=o[1])&&(r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].reduce((function(e,t,n){return l.includes(t)?e:[].concat(z(e),[n])}),[])),null==i||i.forEach((function(e){var t=e.dates.split(", ");n.push({dates:t,descrip:e.descrip})})),S()&&(N(r),O(n));case 12:case"end":return e.stop()}}),e)}))),[S,w]),X=!(null==C||null===(t=C[u])||void 0===t||!t.length);return i().createElement("div",{className:a()("dc-input-field",{"dc-input-field--has-error":X})},i().createElement(d.Tooltip,{className:"trade-container__tooltip",alignment:"left",message:X?C[u][0]:void 0,has_error:X},i().createElement(d.DatePicker,{id:r,alignment:"left",display_format:"DD MMM YYYY",show_leading_icon:!0,error:null!=C&&null!==(n=C[u])&&void 0!==n&&n.length?"":void 0,mode:l,max_date:(B=b?86400:R(),o?$().clone().add(B,"second"):(0,m.toMoment)(c).clone().add(R(),"second")),min_date:V(),name:u,onChange:function(e){var t;if(S())if(A())F(Number(e.duration));else if(null!==(t=e.target)&&void 0!==t&&t.value){var n;G((0,m.toMoment)(null===(n=e.target)||void 0===n?void 0:n.value))}if("function"==typeof g&&e.target){var r=A()?e.target.value:(0,m.toMoment)(e.target.value).format("YYYY-MM-DD");g({target:{name:e.target.name||"",value:r}})}},onChangeCalendarMonth:W,has_range_selection:A(),has_today_btn:!A(),footer:A()?D?1==+D?(0,f.localize)("Duration: {{duration}} day",{duration:D}):(0,f.localize)("Duration: {{duration}} days",{duration:D}):(0,f.localize)("Minimum duration is 1 day"):"",events:j,disabled_days:M,keep_open:!0,readOnly:!A(),value:A()?(0,m.toMoment)().add(D,"days").format("YYYY-MM-DD"):q||V()})))}));var $=n("../../node_modules/react-transition-group/esm/CSSTransition.js");function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function V(e,t,n){return(t=function(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return Z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t,n,r){for(var a=0;a<t.length;a++)if(e.isBetween(t[a],n[a],r))return!0;return!1}const Q=function(e){var t=e.preClass,n=e.selected_time,r=e.end_times,o=e.start_times,l=e.onChange,u=e.className,c=o?o.map((function(e){return(0,m.toMoment)(e)})):[(0,m.toMoment)()],s=r?r.map((function(e){return(0,m.toMoment)(e)})):[(0,m.toMoment)().hour(23).minute(59).seconds(59).milliseconds(999)],d=(0,m.toMoment)(),_=X(n.split(":"),2),p=_[0],y=_[1],v=W(Array(24).keys()).map((function(e){return"0".concat(e).slice(-2)})),h=W(Array(12).keys()).map((function(e){return"0".concat(5*e).slice(-2)})),g=function(e,t,n){if((!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&n){var r=X(n.split(":"),2),a=r[0],o=r[1];if("h"===e&&t!==a||"m"===e&&t!==o){var i="m"===e?t:o;l("".concat("h"===e?t:a,":").concat(i))}}};return i().createElement("div",{className:a()("".concat(t,"__dialog"),"".concat(u))},i().createElement("div",{className:"".concat(t,"__selector")},i().createElement("div",{className:"".concat(t,"__selector--hours")},i().createElement("div",{className:a()("".concat(t,"__selector-list-title"),"center-text")},i().createElement("strong",null,(0,f.localize)("Hour"))),i().createElement("div",null,v.map((function(e){d.hour(Number(e));var r=c.map((function(e){return e.clone().minute(0)})),o=J(d,r,s),l=J(d,c,s,"minute"),u=d.minutes()>52?o&&l:o;return i().createElement("div",{className:a()("".concat(t,"__selector-list-item"),V({},"".concat(t,"__selector-list-item--selected"),p===e),V({},"".concat(t,"__selector-list-item--disabled"),!u)),key:e,onClick:function(){g("h",e,n,u)}},e)})))),i().createElement("div",{className:"".concat(t,"__selector--minutes")},i().createElement("div",{className:a()("".concat(t,"__selector-list-title"),"center-text")},i().createElement("strong",null,(0,f.localize)("Minute"))),i().createElement("div",null,h.map((function(e){d.hour(Number(p)).minute(Number(e));var r=J(d,c,s,"minute");return i().createElement("div",{className:a()("".concat(t,"__selector-list-item"),V({},"".concat(t,"__selector-list-item--selected"),y===e),V({},"".concat(t,"__selector-list-item--disabled"),!r)),key:e,onClick:function(){g("m",e,n,r)}},e)}))))))};function ee(e,t,n){return(t=function(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ae="time-picker";const oe=(0,v.observer)((function(e){var t,n,r=e.end_times,o=e.is_nativepicker,l=e.name,u=e.onChange,c=e.padding,s=e.placeholder,m=e.selected_time,f=e.start_times,_=e.validation_errors,p=(0,x.A)().ui,y=p.current_focus,v=p.setCurrentFocus,h=ne(i().useState(!1),2),g=h[0],b=h[1],E=ne(i().useState(null),2),w=E[0],C=E[1];i().useEffect((function(){return document.addEventListener("mousedown",A),function(){return document.removeEventListener("mousedown",A)}}));var S=function(e){var t="object"===te(e)?e.target.value:e;t!==m&&u({target:{name:l,value:t}})},A=function(e){null!=w&&w.contains(e.target)||!g||b(!1)};return i().createElement("div",{ref:function(e){e&&C(e)},className:a()(ae,ee({},"".concat(ae,"--padding"),c))},o?i().createElement("input",{type:"time","data-testid":"dt_".concat(l,"_input"),id:"dt_".concat(l,"_input"),value:m,onChange:S,name:l,min:null===(t=f[0])||void 0===t?void 0:t.format("HH:mm"),max:null===(n=r[r.length-1])||void 0===n?void 0:n.format("HH:mm")}):i().createElement(i().Fragment,null,i().createElement(d.InputField,{error_messages:_,type:"text",is_hj_whitelisted:!0,is_read_only:!0,id:"dt_".concat(l,"_input"),className:a()("".concat(ae,"-input")),current_focus:y,value:"".concat(m," GMT"),onClick:function(){b(!g)},name:l,placeholder:s,setCurrentFocus:v}),i().createElement(d.Icon,{icon:"IcClockOutline",className:"".concat(ae,"__icon")}),i().createElement($.A,{in:g,classNames:{enter:"time-picker__dialog--enter",enterDone:"time-picker__dialog--enter-done",exit:"time-picker__dialog--exit"},timeout:100,unmountOnExit:!0},i().createElement(Q,{end_times:r,start_times:f,className:"from-left",onChange:S,preClass:ae,selected_time:m}))))}));var ie=n("./src/Stores/Modules/Trading/Helpers/end-time.ts");const le=(0,v.observer)((function(){var e=(0,x.A)().common.server_time,t=(0,y.P)(),n=t.expiry_date,r=t.expiry_time,a=t.market_open_times,o=t.market_close_times,l=t.onChange,u=t.is_market_closed,c=(0,m.toMoment)(n),s=a.map((function(e){return(0,m.setTime)(c.clone(),e)})),d=o.map((function(e){return(0,m.setTime)(c.clone(),e)})),f=(0,m.setTime)(c.clone(),r),_=(0,m.toMoment)(e),p=(0,ie.h)(_.clone(),s,d),v=(0,ie.X)(_.clone(),f,s,d);return i().useEffect((function(){r===v||u||l({target:{name:"expiry_time",value:v}})}),[r,v,l,u]),i().createElement(oe,{end_times:p.end,onChange:l,name:"expiry_time",placeholder:"12:00",start_times:p.start,selected_time:v})}));var ue=n("./src/Modules/Trading/Components/Form/TradeParams/Duration/expiry-text.tsx"),ce=n("./src/Modules/Trading/Components/Form/TradeParams/Duration/duration-range-text.tsx");function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(null,arguments)}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const de=(0,v.observer)((function(e){var t,n=e.advanced_duration_unit,r=e.advanced_expiry_type,o=e.changeDurationUnit,l=e.duration_t,u=e.duration_units_list,c=e.expiry_date,s=e.expiry_epoch,f=e.expiry_list,_=e.expiry_type,p=e.getDurationFromUnit,v=e.number_input_props,h=e.onChange,g=e.onChangeUiStore,b=e.server_time,E=e.shared_input_props,w=e.start_date,C=(0,x.A)().ui,S=C.current_focus,A=C.setCurrentFocus,k=(0,y.P)(),M=k.contract_expiry_type,N=k.duration_min_max,T=k.validation_errors,j=k.onChangeMultiple,O=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,m.getDurationMinMaxValues)(N,M,n),2),D=O[0],I=O[1],F=!1;if("endtime"===_){var L=(0,m.hasIntradayDurationUnit)(u);F=(!!w||(0,m.toMoment)(c||b).isSame((0,m.toMoment)(b),"day"))&&L}var z=a()("endtime-container",{"has-time":F}),U=!(null==T||null===(t=T.duration)||void 0===t||!t.length),Y=(0,m.getUnitMap)()[n],H=Y.name_plural,q=Y.name,G=null!=H?H:q;return i().useEffect((function(){"endtime"===_&&setTimeout((function(){return h({target:{name:"expiry_date",value:(0,m.getTomorrowDate)(b)}})}),100)}),[_]),i().createElement(i().Fragment,null,f.length>1&&i().createElement(d.ButtonToggle,{id:"dt_advanced_duration_toggle",buttons_arr:f,name:"advanced_expiry_type",is_animated:!0,onChange:function(e){var t=e.target,n=t.name,r=t.value;"endtime"===r?j({expiry_date:(0,m.getTomorrowDate)(b),expiry_type:r}):h({target:{name:"expiry_type",value:r}}),g({name:n,value:r})},value:r}),"duration"===_?i().createElement("div",{className:"duration-container"},u.length>=1&&i().createElement(d.Dropdown,{classNameDisplay:"dc-dropdown__display--duration",disabled:!1,is_alignment_left:!0,is_nativepicker:!1,list:u,name:"advanced_duration_unit",no_border:!0,onChange:o,value:n}),"t"===n&&"tick"===M&&i().createElement(P,se({name:"duration",value:l},E)),"d"===n&&i().createElement(B,{id:"dt_advanced_duration_datepicker",mode:"duration",name:"duration",is_24_hours_contract:F}),"t"!==n&&"d"!==n&&i().createElement(d.InputField,se({id:"dt_advanced_duration_input",classNameInput:"trade-container__input",current_focus:S,error_messages:T.duration,label:1===u.length?u[0].text:void 0,name:"duration",setCurrentFocus:A,value:p(n)},v,E)),"t"!==n&&i().createElement(ce.A,{min:D,max:I,duration_unit_text:G}),"d"===n&&i().createElement(ue.A,{expiry_epoch:Number(s),has_error:U})):i().createElement("div",{className:z},i().createElement(B,{id:"dt_advanced_duration_datepicker",name:"expiry_date",is_24_hours_contract:F}),F&&i().createElement(le,null),!F&&i().createElement(ue.A,{expiry_epoch:Number(s)})))}));function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(null,arguments)}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const pe=(0,v.observer)((function(e){var t,n,r=e.changeDurationUnit,a=e.duration_t,o=e.duration_units_list,l=e.getDurationFromUnit,u=e.number_input_props,c=e.shared_input_props,s=e.simple_duration_unit,f=(0,x.A)().ui,_=f.current_focus,p=f.setCurrentFocus,v=(0,y.P)(),h=v.contract_expiry_type,g=v.duration_min_max,b=v.validation_errors,E=s||f.simple_duration_unit,w=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,m.getDurationMinMaxValues)(g,h,E),2),C=w[0],S=w[1],A=(0,m.getUnitMap)()[E],k=A.name_plural,M=A.name,N=null!=k?k:M,T=!o.some((function(e){return"t"===e.value})),j=(n=o.filter((function(e){return"t"===e.value||"m"===e.value}))).length<=1?[]:n;return i().createElement(i().Fragment,null,j.length>1&&i().createElement(d.ButtonToggle,{id:"dt_simple_duration_toggle",buttons_arr:j,is_animated:!0,name:"simple_duration_unit",onChange:r,value:E}),"t"===E&&"tick"===h&&i().createElement(P,fe({name:"duration",value:a},c)),"d"===E&&i().createElement(B,{id:"dt_simple_duration_datepicker",mode:"duration",name:"duration"}),"t"!==E&&"d"!==E&&i().createElement(d.InputField,fe({id:"dt_simple_duration_input",classNameInput:"trade-container__input",current_focus:_,error_messages:b.duration,name:"duration",label:T?null===(t=o[0])||void 0===t?void 0:t.text:void 0,setCurrentFocus:p,value:l(E)},u,c)),"t"!==E&&i().createElement(ce.A,{min:C,max:S,duration_unit_text:N}))}));function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(null,arguments)}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e,t,n){return(t=function(e){var t=function(e){if("object"!=ye(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ye(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const be=function(e){var t=e.advanced_duration_unit,n=e.advanced_expiry_type,r=e.contract_type,o=e.duration_t,l=e.duration_unit,c=e.duration_units_list,s=e.duration,_=e.expiry_date,p=e.expiry_epoch,y=e.expiry_time,v=e.expiry_type,h=e.getDurationFromUnit,g=e.hasDurationUnit,b=e.is_advanced_duration,E=e.is_minimized,x=e.max_value,w=e.min_value,C=e.onChange,S=e.onChangeMultiple,A=e.onChangeUiStore,k=e.server_time,M=e.simple_duration_unit,N=e.start_date;i().useEffect((function(){(0,m.isVanillaContract)(r)&&U({target:{value:!0,name:"is_advanced_duration"}})}),[r]);var T=[{text:(0,f.localize)("Duration"),value:"duration"}],j=T.find((function(e){return"endtime"===e.value}));if(1===c.length&&"t"===l?j&&T.pop():j||T.push({text:(0,f.localize)("End time"),value:"endtime"}),E){var O,I,F=(0,m.toMoment)(_),L=null!==(O=null===(I=c.find((function(e){return e.value===l})))||void 0===I?void 0:I.text)&&void 0!==O?O:"";return i().createElement("div",{className:"fieldset-minimized fieldset-minimized__duration"},"duration"===v?"".concat(s," ").concat(L):"".concat(F.format("ddd - DD MMM, YYYY"),"\n").concat(y))}var z=function(e){var t=e.target,n=t.name,r=t.value,a=h(r);A({name:n,value:r}),S({duration_unit:r,duration:Number(a)})},U=function(e){var r=e.target,a=r.name,o=r.value;A({name:a,value:o});var i=o?t:M,u=h(i);g(i,o)||(i=c[0].value,A({name:"".concat(o?"advanced":"simple","_duration_unit"),value:i}));var m={};o||"duration"===v||(m.expiry_type="duration"),o&&v!==n&&(m.expiry_type=n),i===l&&Number(u)===s||(m.duration_unit=i,m.duration=u),Object.keys(m).length&&S(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m))},Y={shared_input:{is_hj_whitelisted:!0,onChange:function(e){var n=e.target,r=n.name,a=n.value,o="duration_".concat(b?t:M);A({name:o,value:+a}),C({target:{name:r,value:+a}})},max_value:Number(x),min_value:Number(w)},number_input:{type:"number",is_incrementable:!0}},H=T.length>1||c.length>1;return i().createElement(u.A,{className:a()("trade-container__fieldset",{"trade-container__fieldset--advanced":b})},1===c.length&&!b&&i().createElement(d.Dropdown,{classNameDisplay:"dc-dropdown__display--duration",disabled:!1,is_alignment_left:!0,is_nativepicker:!1,list:c,name:"simple_duration_unit",no_border:!0,onChange:z,value:M}),!H&&i().createElement(P,ve({name:"duration",value:o},Y.shared_input)),H&&i().createElement(i().Fragment,null,b&&i().createElement(de,{advanced_duration_unit:t,advanced_expiry_type:n,changeDurationUnit:z,duration_t:o,duration_units_list:c,expiry_date:_,expiry_epoch:p,expiry_list:T,expiry_type:v,getDurationFromUnit:h,number_input_props:Y.number_input,onChange:C,onChangeUiStore:A,server_time:k,shared_input_props:Y.shared_input,start_date:N}),!b&&i().createElement(pe,{getDurationFromUnit:h,changeDurationUnit:z,duration_t:o,duration_units_list:c,number_input_props:Y.number_input,shared_input_props:Y.shared_input,simple_duration_unit:M}),!(0,m.isVanillaContract)(r)&&i().createElement(D,{name:"is_advanced_duration",onChange:U,value:b})))};function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(null,arguments)}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||we(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Se=(0,v.observer)((function(e){var t=e.is_minimized,n=(0,x.A)().ui,r=n.advanced_expiry_type,a=n.advanced_duration_unit,o=n.getDurationFromUnit,l=n.is_advanced_duration,u=n.onChangeUiStore,c=n.simple_duration_unit,s=n.duration_t,d=(0,y.P)(),f=d.contract_expiry_type,_=d.contract_type,p=d.duration,v=d.duration_unit,h=d.duration_units_list,g=d.duration_min_max,b=d.expiry_type,E=d.expiry_date,w=d.expiry_epoch,C=d.expiry_time,S=d.start_date,A=d.onChange,k=d.onChangeMultiple,M={advanced_duration_unit:a,advanced_expiry_type:r,contract_expiry_type:f,contract_type:_,duration_min_max:g,duration_t:s,duration_unit:v,duration_units_list:h,duration:p,expiry_date:E,expiry_epoch:w,expiry_time:C,expiry_type:b,getDurationFromUnit:o,is_minimized:t,is_advanced_duration:l,onChange:A,onChangeMultiple:k,onChangeUiStore:u,simple_duration_unit:c,start_date:S},N=function(e,t){var n=function(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(h);return n.length>1&&!t&&(n=n.filter((function(e){return"m"===e.value||"t"===e.value}))),n.some((function(t){return t.value===e}))},T=!N(l?a:c,l),j=!l&&"d"===c&&4===h.length,O=xe((0,m.getDurationMinMaxValues)(g,f,v),2),P=O[0],D=O[1],I=i().useCallback((function(e){var t=xe((0,m.getDurationMinMaxValues)(g,f,v),2),n=t[0],r=t[1];"tick"===f&&e<Number(n)&&(u({name:"duration_".concat(v),value:Number(n)}),A({target:{name:"duration",value:n}})),e>=Number(n)&&e>Number(r)&&"d"!==v&&(u({name:"duration_".concat(v),value:Number(r)}),A({target:{name:"duration",value:r}}))}),[f,v,g,A,u]);return i().useEffect((function(){var e=l?a:c,t=o(e),n=v,r=p;(null==h?void 0:h.length)>0&&(T||j)&&(n=h[0].value,r=o(n),k({duration_unit:n,duration:+r})),n!==e&&(u({name:"advanced_duration_unit",value:n}),u({name:"simple_duration_unit",value:n})),+r!=+t&&u({name:"duration_".concat(n),value:r}),"endtime"===b&&(h.length>1||l?(l||u({name:"is_advanced_duration",value:!0}),u({name:"advanced_expiry_type",value:"endtime"})):A({target:{name:"expiry_type",value:"duration"}})),I(Number(t))}),[T,j]),i().useEffect((function(){"d"===v&&u({name:"is_advanced_duration",value:!0})}),[v,u]),i().useEffect((function(){l&&b!==r&&A({target:{name:"expiry_type",value:r}})}),[l,b,r,A]),i().useEffect((function(){var e=o(v);!l&&"duration"!==b&&A({target:{name:"expiry_type",value:"duration"}}),p!==Number(e)&&u({name:"duration_".concat(v),value:p}),I(Number(e))}),[v,l,b,p,I,A,u,o]),i().createElement(be,Ee({hasDurationUnit:N,max_value:D,min_value:P},M))}));const Ae=Se;var ke=n("./src/Modules/Trading/Components/Form/TradeParams/last-digit.tsx"),Me=n("./src/Stores/Modules/Trading/Helpers/multiplier.ts");function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Te=(0,v.observer)((function(){var e=(0,x.A)().ui,t=(0,y.P)(),n=t.cancellation_range_list,r=t.cancellation_duration,a=t.has_cancellation,o=t.has_stop_loss,l=t.has_take_profit,c=t.onChangeMultiple,s=e.should_show_cancellation_warning,m=e.toggleCancellationWarning,_=(l||o)&&s,p=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useState(!s),2),v=p[0],h=p[1],g=i().useCallback((function(){h((function(e){return!e}))}),[]),b=i().createElement(d.Checkbox,{id:"dt_cancellation-checkbox_input",onChange:function(){return(0,Me.N)({has_cancellation:a,onChangeMultiple:c})},name:"has_cancellation",label:i().createElement(f.Localize,{i18n_default_text:"Deal cancellation"}),defaultChecked:a});return i().createElement(i().Fragment,null,!!n.length&&i().createElement(u.A,{className:"trade-container__fieldset"},i().createElement("div",{className:"dc-input-wrapper--inline"},_?i().createElement(d.Popover,{alignment:"left",classNameBubble:"trade-container__popover",is_bubble_hover_enabled:!0,margin:2,message:i().createElement(d.PopoverMessageCheckbox,{defaultChecked:v,checkboxLabel:(0,f.localize)("Don't show this again"),message:(0,f.localize)("Take profit and/or stop loss are not available while deal cancellation is active."),name:"should_show_cancellation_warning",onChange:g}),onBubbleClose:function(){v&&m()},relative_render:!0},b):i().createElement(i().Fragment,null,b),i().createElement(d.Popover,{alignment:"left",icon:"info",id:"dt_cancellation-checkbox__tooltip",is_bubble_hover_enabled:!0,message:(0,f.localize)("When this is active, you can cancel your trade within the chosen time frame. Your stake will be returned without loss."),classNameBubble:"trade-container__deal-cancellation-popover",margin:216,relative_render:!0})),a&&i().createElement(d.Dropdown,{id:"dt_cancellation_range",className:"trade-container__multiplier-dropdown",is_alignment_left:!0,is_nativepicker:!1,list:n,name:"cancellation_duration",no_border:!0,value:r,onChange:function(e){return(0,Me.x)({event:e,onChangeMultiple:c})}})))}));var je=n("./src/App/Components/Form/number-selector.tsx");const Oe=(0,v.observer)((function(){var e,t,n=(0,y.P)(),r=n.accumulator_range_list,o=n.growth_rate,l=n.is_accumulator,c=n.onChange,s=n.tick_size_barrier_percentage,d=n.proposal_info,_=n.has_open_accu_contract,p=null==r?void 0:r.reduce((function(e,t,n){return n%5==0&&e.push(r.slice(n,n+5)),e}),[]),v=(null==d||null===(e=d.ACCU)||void 0===e?void 0:e.has_error)||!(null!=d&&null!==(t=d.ACCU)&&void 0!==t&&t.id)||(0,m.isEmptyObject)(d);return null!=r&&r.length?i().createElement(u.A,{className:a()("trade-container__fieldset","accumulator"),header:(0,f.localize)("Growth rate"),is_center:!0,is_tooltip_disabled:v&&l,header_tooltip:(0,f.localize)("Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within ±{{tick_size_barrier_percentage}} from the previous spot price.",{growth_rate:(0,m.getGrowthRatePercentage)(o),tick_size_barrier_percentage:s})},i().createElement(je.A,{arr_arr_numbers:p,name:"growth_rate",onChange:c,selected_number:o,should_show_in_percents:!0,is_disabled:_})):null}));var Pe=n("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/stop-loss.tsx"),De=n("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.tsx"),Ie=n("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/expiration.tsx"),Fe=n("./src/Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-info-display.tsx"),Le=n("./src/Modules/Trading/Components/Form/TradeParams/strike.tsx"),ze=n("./src/Modules/Trading/Components/Form/TradeParams/trade-type-tabs.tsx");const Ue=(0,v.observer)((function(e){var t=e.is_minimized,n=void 0!==t&&t,r=(0,y.P)(),o=r.form_components,l=function(e){return o.includes(e)};return r.is_turbos?i().createElement(i().Fragment,null,i().createElement(u.A,{className:a()("trade-container__fieldset","trade-container__fieldset--no-padding")},l("trade_type_tabs")&&i().createElement(ze.A,{key:"trade_type_tabs"})),l("amount")&&i().createElement(k,{key:"amount",is_minimized:n}),l("payout_selector")&&i().createElement(N.A,{key:"payout_selector"}),l("duration")&&i().createElement(Ae,{key:"duration",is_minimized:n}),l("take_profit")&&i().createElement(De.A,{key:"take_profit"})):i().createElement(i().Fragment,null,l("duration")&&i().createElement(Ae,{key:"duration",is_minimized:n}),l("barrier")&&i().createElement(M.A,{key:"barrier",is_minimized:n}),l("last_digit")&&i().createElement(ke.A,{key:"last_digit",is_minimized:n}),l("accumulator")&&i().createElement(Oe,{key:"accumulator"}),(l("trade_type_tabs")||l("strike")||l("payout_selector"))&&i().createElement(u.A,{className:a()("trade-container__fieldset","trade-container__fieldset--no-padding")},l("trade_type_tabs")&&i().createElement(ze.A,{key:"trade_type_tabs"}),l("strike")&&i().createElement(Le.A,{key:"strike"}),l("payout_selector")&&i().createElement(N.A,{key:"payout_selector"})),l("amount")&&i().createElement(k,{key:"amount",is_minimized:n}),l("take_profit")&&i().createElement(De.A,{key:"take_profit"}),l("stop_loss")&&i().createElement(Pe.A,{key:"stop_loss"}),l("cancellation")&&i().createElement(Te,{key:"cancellation"}),l("expiration")&&i().createElement(Ie.A,{key:"expiration"}),l("accu_info_display")&&i().createElement(Fe.A,{key:"accu_info_display"}))})),Ye=function(e){var t=e.is_market_closed,n=void 0!==t&&t,r=e.is_trade_enabled,o=e.is_single_logging_in,m=void 0!==o&&o;return i().createElement("div",{className:a()("sidebar__items",{"sidebar__items--market-closed":n})},!r||m?i().createElement(l.g,{speed:2}):i().createElement(i().Fragment,null,i().createElement(u.A,{className:"trade-container__fieldset trade-types"},i().createElement(c.A,null)),i().createElement(Ue,null),i().createElement("div",{className:"purchase-container"},i().createElement(s.A,{is_market_closed:n}))))}},"./src/Stores/Modules/Trading/Helpers/end-time.ts":(e,t,n)=>{n.d(t,{X:()=>i,h:()=>l});var r=n("../../node_modules/moment/moment.js"),a=n.n(r),o=function(e,t){var n=a()(e);return n.minute(Math.ceil(n.minute()/t)*t)},i=function(e,t,n,r){for(var i=0;i<n.length;i++)if(t.isAfter(n[i])&&t.isBefore(r[i]))return o(t,5).format("HH:mm");for(var l=0;l<n.length;l++){var u=a()(n[l]);if(u.isAfter(e))return o(u,5).format("HH:mm")}return o(e,5).format("HH:mm")},l=function(e,t,n){var r={start:t.map((function(t){return e.isBefore(t)?a()(t).clone():e})),end:n};return r.start.length>0&&(r.start[0]=o(r.start[0],5)),r}}}]);