"use strict";(self.webpackChunk_deriv_account=self.webpackChunk_deriv_account||[]).push([["Sections_Security_Passwords_index_ts"],{"./Components/sent-email-modal/index.ts":(e,t,a)=>{a.d(t,{default:()=>c});var i=a("@deriv-com/translations"),s=a("@deriv/components"),o=a("@deriv/shared"),n=a("../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),l=a("@deriv/utils"),r=a("../../../node_modules/react/jsx-runtime.js");const c=e=>{let{identifier_title:t,is_modal_when_mobile:a=!1,is_open:c,has_live_chat:d=!1,onClickSendEmail:_,onClose:m}=e;const{isDesktop:u}=(0,n.Y)(),{localize:p}=(0,i.useTranslations)(),x=d?(0,r.jsx)(i.Localize,{i18n_default_text:"Still didn't get the email? Please contact us via <0>live chat.</0>",components:[(0,r.jsx)("span",{className:"send-email-template__footer-live-chat",onClick:()=>{m(),l.Chat.open()},children:(0,r.jsx)(s.Popover,{className:"send-email-template__footer-live-chat__link",classNameBubble:"help-centre__tooltip",alignment:"top",message:p("Live chat"),zIndex:"9999"})},0)]}):null,h=(0,r.jsx)(s.SendEmailTemplate,{className:"sent-email",subtitle:(()=>{let e="";switch(t){case o.CFD_PLATFORMS.DXTRADE:e=(0,r.jsx)(i.Localize,{i18n_default_text:"Please click on the link in the email to change your <0>{{platform_name_dxtrade}}</0> password.",components:[(0,r.jsx)("span",{className:"send-email-template__subtitle-platform"},0)],values:{platform_name_dxtrade:(0,o.getPlatformSettings)("dxtrade").name}});break;case o.CFD_PLATFORMS.MT5:e=p("Please click on the link in the email to change your Deriv MT5 password.");break;case"Google":case"Facebook":e=p("Check your {{ identifier_title }} account email and click the link in the email to proceed.",{identifier_title:t});break;case"Change_Email":e=p("Check your email and click the link in the email to proceed.");break;default:e=p("Please click on the link in the email to reset your password.")}return e})(),title:p("We’ve sent you an email"),lbl_no_receive:p("Didn't receive the email?"),txt_resend:p("Resend email"),txt_resend_in:p("Resend email in"),onClickSendEmail:_,live_chat:x,children:[{key:"email_spam",icon:"IcEmailSpam",content:(0,i.localize)("The email is in your spam folder (Sometimes things get lost there).")},{key:"wrong_email",icon:"IcEmail",content:(0,i.localize)("You accidentally gave us another email address (Usually a work or a personal one instead of the one you meant).")},{key:"wrong_typo",icon:"IcEmailTypo",content:(0,i.localize)("The email address you entered had a mistake or typo (happens to the best of us).")},{key:"email_firewall",icon:"IcEmailFirewall",content:(0,i.localize)("We can’t deliver the email to this address (Usually because of firewalls or filtering).")}].map((e=>(0,r.jsxs)("div",{className:"sent-email__content",children:[(0,r.jsx)(s.Icon,{icon:e.icon,size:32}),(0,r.jsx)(s.Text,{size:"xxs",as:"p",children:e.content})]},e.key)))});return u||a?(0,r.jsx)(s.Modal,{className:"sent-email__modal",is_open:c,has_close_icon:!0,should_header_stick_body:!0,title:"",toggleModal:m,width:"440px",children:(0,r.jsx)(s.Div100vhContainer,{className:"account__scrollbars_container-wrapper",is_disabled:u,height_offset:"80px",children:(0,r.jsxs)(s.Modal.Body,{children:[(0,r.jsx)("div",{onClick:m,className:"send-email-template__close","data-testid":"dt_send_email_template_close",children:(0,r.jsx)(s.Icon,{icon:"IcCross"})}),h]})})}):(0,r.jsx)(s.MobileDialog,{portal_element_id:"modal_root",title:p("We’ve sent you an email"),wrapper_classname:"mt5-email-sent",visible:c,onClose:m,has_content_scroll:!0,children:h})}},"./Sections/Security/Passwords/index.ts":(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var i=a("react"),s=a("@deriv/components"),o=a("@deriv/stores"),n=a("@deriv/api"),l=a("@deriv/shared"),r=a("@deriv-com/translations"),c=a("./Components/sent-email-modal/index.ts"),d=a("../../../node_modules/react/jsx-runtime.js");const _=(0,o.observer)((()=>{const{traders_hub:{is_eu_user:e,financial_restricted_countries:t}}=(0,o.useStore)(),a=(0,l.getBrandWebsiteName)(),i=(0,l.getPlatformSettings)("dbot").name,s=(0,l.getPlatformSettings)("go").name,n=(0,l.getPlatformSettings)("smarttrader").name,c=(0,l.getPlatformSettings)("trader").name,_=(0,l.getPlatformSettings)("ctrader").name;return e?(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv password</0> to log in to {{brand_website_name}} and {{platform_name_trader}}.",components:[(0,d.jsx)("strong",{},0)],values:{brand_website_name:a,platform_name_trader:c}}):t?(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv password</0> to log in to {{brand_website_name}}, {{platform_name_trader}} and {{platform_name_go}}.",components:[(0,d.jsx)("strong",{},0)],values:{brand_website_name:a,platform_name_trader:c,platform_name_go:s}}):(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv password</0> to log in to {{brand_website_name}}, {{platform_name_go}}, {{platform_name_trader}}, {{platform_name_smarttrader}}, {{platform_name_dbot}} and {{platform_name_ctrader}}.",components:[(0,d.jsx)("strong",{},0)],values:{brand_website_name:a,platform_name_trader:c,platform_name_dbot:i,platform_name_smarttrader:n,platform_name_go:s,platform_name_ctrader:_}})})),m=({color:e="#d6dadb",height:t="1px",margin:a,className:i})=>(0,d.jsx)("div",{style:{margin:a,backgroundColor:e,height:t},className:i});var u=a("@deriv/quill-icons");const p=e=>{let{icon:t,title:a}=e;const i={deriv_email:(0,d.jsx)(u.LegacyEmailIcon,{iconSize:"sm"}),deriv_password:(0,d.jsx)(u.BrandDerivLogoCoralIcon,{height:24,width:24}),deriv_mt5_password:(0,d.jsx)(u.PartnersProductBrandLightDerivMt5LogoIcon,{height:24,width:24}),deriv_x_password:(0,d.jsx)(u.AccountsDerivXIcon,{iconSize:"sm"})};return(0,d.jsxs)("div",{className:"email-password-title-wrapper",children:[i[t],(0,d.jsx)(s.Text,{weight:"bold",size:"xs",children:a})]})},x=e=>{let{title:t,title_icon:a,description:o,should_display_button:n=!0,onClick:l,button_text:r,button_icon:c}=e;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(p,{icon:a,title:t}),(0,d.jsx)(s.Text,{as:"p",color:"prominent",size:"xs",children:o}),n&&(0,d.jsx)(s.Button,{className:"account__passwords-footer-btn",type:"button",onClick:l,has_effect:!0,is_disabled:!1,is_loading:!1,text:r,icon:c,large:!0,secondary:!0})]})},h=(0,o.observer)((()=>{const{localize:e}=(0,r.useTranslations)(),{client:{social_identity_provider:t,is_social_signup:a,email:s}}=(0,o.useStore)(),{mutate:p}=(0,n.useVerifyEmail)(),[h,f]=(0,i.useState)(!1),v=()=>{p("apple"===t?{verify_email:s,type:"request_email"}:{verify_email:s,type:"reset_password"}),f(!0)},g=t?(0,l.toTitleCase)(t):"";return(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)("div",{className:"account__passwords-wrapper",children:[(0,d.jsx)(m,{className:"account__divider"}),(0,d.jsx)(x,{title:e("Deriv password"),title_icon:"deriv_password",description:(0,d.jsx)(_,{}),onClick:v,button_text:a&&t?e("Unlink from {{identifier_title}}",{identifier_title:g}):e("Change password"),button_icon:(()=>{const e={apple:(0,d.jsx)(u.SocialAppleBlackIcon,{iconSize:"xs"}),google:(0,d.jsx)(u.SocialGoogleBrandIcon,{iconSize:"xs"}),facebook:(0,d.jsx)(u.SocialFacebookBrandIcon,{iconSize:"xs"})};return a&&t?e[t]:null})()}),(0,d.jsx)(c.default,{is_open:h,onClose:()=>f(!1),identifier_title:g,onClickSendEmail:v,is_modal_when_mobile:!0})]})})})),f=e=>{let{onClose:t,is_open:a,identifier_title:i,onClickSendEmail:o}=e;const{localize:n}=(0,r.useTranslations)();return(0,d.jsxs)(s.Modal,{className:"unlink-account__modal",is_open:a,has_close_icon:!0,toggleModal:t,width:"440px",children:[(0,d.jsxs)(s.Modal.Body,{children:[(0,d.jsx)("div",{onClick:t,className:"unlink-account__modal-close",children:(0,d.jsx)(s.Icon,{icon:"IcCross"})}),(0,d.jsx)("div",{className:"unlink-account__modal-icon",children:(0,d.jsx)(s.Icon,{icon:"IcEmailChanged",size:128})}),(0,d.jsxs)("div",{className:"unlink-account__modal-content",children:[(0,d.jsx)(s.Text,{className:"unlink-account__modal-title",weight:"bold",size:"s",children:(0,d.jsx)(r.Localize,{i18n_default_text:"Change your login email"})}),(0,d.jsx)(s.Text,{className:"unlink-account__modal-description",size:"xs",children:(0,d.jsx)(r.Localize,{i18n_default_text:"To change your email address, you'll first need to unlink your email address from your {{identifier_title}} account.",values:{identifier_title:i}})})]})]}),(0,d.jsxs)(s.Modal.Footer,{className:"unlink-account__footer",children:[(0,d.jsx)(s.Button,{onClick:t,has_effect:!0,text:n("Cancel"),secondary:!0,large:!0}),(0,d.jsx)(s.Button,{onClick:()=>{t(),o()},has_effect:!0,primary:!0,large:!0,children:(0,d.jsx)(r.Localize,{i18n_default_text:"Unlink from {{identifier_title}}",values:{identifier_title:i}})})]})]})},v=(0,o.observer)((()=>{const{common:{is_from_derivgo:e},client:{social_identity_provider:t,is_social_signup:a,email:_}}=(0,o.useStore)(),{mutate:m,isError:u,error:p,isSuccess:h}=(0,n.useVerifyEmail)(),{localize:v}=(0,r.useTranslations)(),[g,j]=(0,i.useState)(!1),[b,w]=(0,i.useState)(!1),[y,k]=(0,i.useState)(!1),C={verify_email:_,type:"request_email"};(0,i.useEffect)((()=>{u?(k(!0),w(!1)):h&&w(!0)}),[u,h]);const S=()=>{k(!1)};return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)("div",{className:"account__passwords-wrapper",children:[(0,d.jsx)(x,{title:v("Email address"),title_icon:"deriv_email",description:(0,d.jsx)(r.Localize,{i18n_default_text:"This is the email address associated with your Deriv account. <0>{{ email }}</0>",components:[(0,d.jsx)(s.Text,{as:"span",weight:"bold",size:"xs"},0)],values:{email:_}}),should_display_button:!e,onClick:()=>{a?j(!0):m(C)},button_text:v("Change email")}),(0,d.jsx)(f,{is_open:g,onClose:()=>j(!1),identifier_title:(0,l.toTitleCase)(t),onClickSendEmail:()=>{m(C),j(!1),w(!0)}}),(0,d.jsx)(c.default,{is_open:b,onClose:()=>w(!1),identifier_title:"Change_Email",onClickSendEmail:()=>m({verify_email:_,type:"request_email"}),has_live_chat:!0,is_modal_when_mobile:!0})]}),y&&p&&(0,d.jsx)(s.Modal,{is_open:y,has_close_icon:!0,should_header_stick_body:!0,title:v("Email change currently unavailable"),toggleModal:S,width:"440px",height:"200px",children:(0,d.jsxs)("div",{className:"account__email-unhandled-error",children:[(0,d.jsx)(s.Text,{className:"account__email-unhandled-error-error_text",as:"p",size:"xs",children:"EmailChangeFailP2PActive"===p?.code?(0,d.jsx)(r.Localize,{i18n_default_text:"Complete P2P orders and deactivate ads to proceed."}):(0,d.jsx)(r.Localize,{i18n_default_text:p?.message||""})}),(0,d.jsx)(s.Button,{onClick:S,has_effect:!0,primary:!0,large:!0,children:(0,d.jsx)(r.Localize,{i18n_default_text:"OK"})})]})})]})})),g=(0,o.observer)((()=>{const{localize:e}=(0,r.useTranslations)(),[t,a]=(0,i.useState)(!1),{mutate:_}=(0,n.useMutation)("verify_email"),{client:{email:u}}=(0,o.useStore)(),p=()=>{_({payload:{verify_email:u,type:"trading_platform_mt5_password_reset",url_parameters:{redirect_to:3}}}),a(!0)};return(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)("div",{className:"account__passwords-wrapper",children:[(0,d.jsx)(m,{className:"account__divider"}),(0,d.jsx)(x,{title:e("Deriv MT5 password"),title_icon:"deriv_mt5_password",description:(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv MT5 password</0> to log in to your Deriv MT5 accounts on the desktop, web and mobile apps.",components:[(0,d.jsx)(s.Text,{as:"span",weight:"bold"},0)]}),onClick:p,button_text:e("Change password")}),(0,d.jsx)(c.default,{is_open:t,onClose:()=>a(!1),identifier_title:l.CFD_PLATFORMS.MT5,onClickSendEmail:p,is_modal_when_mobile:!0})]})})})),j=(0,o.observer)((()=>{const{localize:e}=(0,r.useTranslations)(),[t,a]=(0,i.useState)(!1),{mutate:_}=(0,n.useMutation)("verify_email"),{client:{email:u}}=(0,o.useStore)(),p=()=>{_({payload:{verify_email:u,type:"trading_platform_dxtrade_password_reset",url_parameters:{redirect_to:3}}}),a(!0)};return(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)("div",{className:"account__passwords-wrapper",children:[(0,d.jsx)(m,{className:"account__divider"}),(0,d.jsx)(x,{title:e("Deriv X password"),title_icon:"deriv_x_password",description:(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv X password</0> to log in to your Deriv X accounts on the web and mobile apps.",components:[(0,d.jsx)(s.Text,{as:"span",weight:"bold"},0)]}),onClick:p,button_text:e("Change password")}),(0,d.jsx)(c.default,{is_open:t,onClose:()=>a(!1),identifier_title:l.CFD_PLATFORMS.DXTRADE,onClickSendEmail:p,is_modal_when_mobile:!0})]})})})),b=(0,o.observer)((()=>{const{client:e,common:t}=(0,o.useStore)(),{is_populating_mt5_account_list:a,is_populating_dxtrade_account_list:n,is_social_signup:l,mt5_login_list:r,is_mt5_password_not_set:c,dxtrade_accounts_list:_,is_dxtrade_password_not_set:m}=e,{is_from_derivgo:u}=t,[p,x]=(0,i.useState)(!0),f=r?.length>0||!c,b=_?.length>0||!m;return(0,i.useEffect)((()=>{!1===a&&!1===n&&void 0!==l&&x(!1)}),[a,n,l]),p?(0,d.jsx)(s.Loading,{is_fullscreen:!1}):(0,d.jsxs)("div",{className:"account__passwords",children:[(0,d.jsx)(v,{}),(0,d.jsx)(h,{}),!u&&f&&(0,d.jsx)(g,{}),!u&&b&&(0,d.jsx)(j,{})]})}))}}]);